
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Melvonaut and Riftconsole">
      
      
      
        <link rel="canonical" href="https://c103-219.cloud.gwdg.de/docs/melvonaut/">
      
      
        <link rel="prev" href="../coverage/">
      
      
        <link rel="next" href="../rift_console/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Melvonaut - Riftonauts Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#melvonaut-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Riftonauts Docs" class="md-header__button md-logo" aria-label="Riftonauts Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Riftonauts Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Melvonaut
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/LolSayna/CIARC" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    LolSayna/CIARC
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Code Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Riftonauts Docs" class="md-nav__button md-logo" aria-label="Riftonauts Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Riftonauts Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LolSayna/CIARC" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    LolSayna/CIARC
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../coverage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coverage Report
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Code Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Melvonaut
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Melvonaut
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#melvonaut" class="md-nav__link">
    <span class="md-ellipsis">
      melvonaut
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.__main__" class="md-nav__link">
    <span class="md-ellipsis">
      __main__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__main__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.current_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      current_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.cancel_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      cancel_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.get_announcements" class="md-nav__link">
    <span class="md-ellipsis">
      get_announcements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.get_observations" class="md-nav__link">
    <span class="md-ellipsis">
      get_observations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.read_images" class="md-nav__link">
    <span class="md-ellipsis">
      read_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.run_get_announcements" class="md-nav__link">
    <span class="md-ellipsis">
      run_get_announcements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.run_get_observations" class="md-nav__link">
    <span class="md-ellipsis">
      run_get_observations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.run_read_images" class="md-nav__link">
    <span class="md-ellipsis">
      run_read_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.start_event_loop" class="md-nav__link">
    <span class="md-ellipsis">
      start_event_loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.api" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
    <nav class="md-nav" aria-label="api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.Handler" class="md-nav__link">
    <span class="md-ellipsis">
      Handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.catcher_middleware" class="md-nav__link">
    <span class="md-ellipsis">
      catcher_middleware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.compression_middleware" class="md-nav__link">
    <span class="md-ellipsis">
      compression_middleware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_all_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_all_images" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_all_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_all_logs" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_all_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_events" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_cpu_usage" class="md-nav__link">
    <span class="md-ellipsis">
      get_cpu_usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_disk_usage" class="md-nav__link">
    <span class="md-ellipsis">
      get_disk_usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_events" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_events_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_events_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_telemetry_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_telemetry_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_list_images" class="md-nav__link">
    <span class="md-ellipsis">
      get_list_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_list_log_files" class="md-nav__link">
    <span class="md-ellipsis">
      get_list_log_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_melvin_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_melvin_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_memory_usage" class="md-nav__link">
    <span class="md-ellipsis">
      get_memory_usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_reset_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_reset_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_restart_melvin" class="md-nav__link">
    <span class="md-ellipsis">
      get_restart_melvin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_shutdown_melvin" class="md-nav__link">
    <span class="md-ellipsis">
      get_shutdown_melvin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.health" class="md-nav__link">
    <span class="md-ellipsis">
      health
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_clear_log" class="md-nav__link">
    <span class="md-ellipsis">
      post_clear_log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_clear_setting" class="md-nav__link">
    <span class="md-ellipsis">
      post_clear_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_image" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_image_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_image_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_log" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_log_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_log_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_execute_command" class="md-nav__link">
    <span class="md-ellipsis">
      post_execute_command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_get_setting" class="md-nav__link">
    <span class="md-ellipsis">
      post_get_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_set_melvin_task" class="md-nav__link">
    <span class="md-ellipsis">
      post_set_melvin_task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_set_setting" class="md-nav__link">
    <span class="md-ellipsis">
      post_set_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.run_api" class="md-nav__link">
    <span class="md-ellipsis">
      run_api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.setup_routes" class="md-nav__link">
    <span class="md-ellipsis">
      setup_routes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc" class="md-nav__link">
    <span class="md-ellipsis">
      ebt_calc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ebt_calc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.events" class="md-nav__link">
    <span class="md-ellipsis">
      events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.events--data-4097-7652-2041-5758-8357-688-6220-8553-1075-7245-8989-1669" class="md-nav__link">
    <span class="md-ellipsis">
      data = [(4097, 7652, 2041), (5758, 8357, 688), (6220, 8553, 1075), (7245, 8989, 1669)]
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.max_offset" class="md-nav__link">
    <span class="md-ellipsis">
      max_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.path" class="md-nav__link">
    <span class="md-ellipsis">
      path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.processed" class="md-nav__link">
    <span class="md-ellipsis">
      processed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.res" class="md-nav__link">
    <span class="md-ellipsis">
      res
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.scaling_factor" class="md-nav__link">
    <span class="md-ellipsis">
      scaling_factor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.x_0" class="md-nav__link">
    <span class="md-ellipsis">
      x_0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.x_max" class="md-nav__link">
    <span class="md-ellipsis">
      x_max
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.y_0" class="md-nav__link">
    <span class="md-ellipsis">
      y_0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.y_max" class="md-nav__link">
    <span class="md-ellipsis">
      y_max
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.distance" class="md-nav__link">
    <span class="md-ellipsis">
      distance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.draw_res" class="md-nav__link">
    <span class="md-ellipsis">
      draw_res
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.f" class="md-nav__link">
    <span class="md-ellipsis">
      f
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.find_matches" class="md-nav__link">
    <span class="md-ellipsis">
      find_matches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.parse_pings" class="md-nav__link">
    <span class="md-ellipsis">
      parse_pings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      mel_telemetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mel_telemetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry" class="md-nav__link">
    <span class="md-ellipsis">
      MelTelemetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MelTelemetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      timestamp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.model_post_init" class="md-nav__link">
    <span class="md-ellipsis">
      model_post_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.store_observation_csv" class="md-nav__link">
    <span class="md-ellipsis">
      store_observation_csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.store_observation_json" class="md-nav__link">
    <span class="md-ellipsis">
      store_observation_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.settings" class="md-nav__link">
    <span class="md-ellipsis">
      settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.file_log_handler_id" class="md-nav__link">
    <span class="md-ellipsis">
      file_log_handler_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.settings" class="md-nav__link">
    <span class="md-ellipsis">
      settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings" class="md-nav__link">
    <span class="md-ellipsis">
      Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.API_PORT" class="md-nav__link">
    <span class="md-ellipsis">
      API_PORT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.BATTERY_HIGH_THRESHOLD" class="md-nav__link">
    <span class="md-ellipsis">
      BATTERY_HIGH_THRESHOLD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.BATTERY_LOW_THRESHOLD" class="md-nav__link">
    <span class="md-ellipsis">
      BATTERY_LOW_THRESHOLD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.CURRENT_MELVIN_TASK" class="md-nav__link">
    <span class="md-ellipsis">
      CURRENT_MELVIN_TASK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DISCORD_ALERTS_ENABLED" class="md-nav__link">
    <span class="md-ellipsis">
      DISCORD_ALERTS_ENABLED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DISCORD_WEBHOOK_TOKEN" class="md-nav__link">
    <span class="md-ellipsis">
      DISCORD_WEBHOOK_TOKEN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DISTANCE_BETWEEN_IMAGES" class="md-nav__link">
    <span class="md-ellipsis">
      DISTANCE_BETWEEN_IMAGES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DO_ACTUALLY_EXIT" class="md-nav__link">
    <span class="md-ellipsis">
      DO_ACTUALLY_EXIT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DO_TIMING_CHECK" class="md-nav__link">
    <span class="md-ellipsis">
      DO_TIMING_CHECK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.FILE_LOGGING_LEVEL" class="md-nav__link">
    <span class="md-ellipsis">
      FILE_LOGGING_LEVEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.NETWORK_SIM_ENABLED" class="md-nav__link">
    <span class="md-ellipsis">
      NETWORK_SIM_ENABLED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.OBSERVATION_REFRESH_RATE" class="md-nav__link">
    <span class="md-ellipsis">
      OBSERVATION_REFRESH_RATE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.OVERRIDES" class="md-nav__link">
    <span class="md-ellipsis">
      OVERRIDES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.START_TIME" class="md-nav__link">
    <span class="md-ellipsis">
      START_TIME
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.STOP_TIME" class="md-nav__link">
    <span class="md-ellipsis">
      STOP_TIME
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_ANGLE_DEG" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_ANGLE_DEG
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_CAMERA_ANGLE_ACQUISITION" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_CAMERA_ANGLE_ACQUISITION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NARROW_X" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NARROW_X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NARROW_Y" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NARROW_Y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NORMAL_X" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NORMAL_X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NORMAL_Y" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NORMAL_Y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_WIDE_X" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_WIDE_X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_WIDE_Y" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_WIDE_Y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TERMINAL_LOGGING_LEVEL" class="md-nav__link">
    <span class="md-ellipsis">
      TERMINAL_LOGGING_LEVEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TRACING" class="md-nav__link">
    <span class="md-ellipsis">
      TRACING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.__getattribute__" class="md-nav__link">
    <span class="md-ellipsis">
      __getattribute__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.__setattr__" class="md-nav__link">
    <span class="md-ellipsis">
      __setattr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.clear_settings" class="md-nav__link">
    <span class="md-ellipsis">
      clear_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.delete_settings" class="md-nav__link">
    <span class="md-ellipsis">
      delete_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.get_default_setting" class="md-nav__link">
    <span class="md-ellipsis">
      get_default_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.get_setting" class="md-nav__link">
    <span class="md-ellipsis">
      get_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.init_settings" class="md-nav__link">
    <span class="md-ellipsis">
      init_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.load_settings" class="md-nav__link">
    <span class="md-ellipsis">
      load_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.save_settings" class="md-nav__link">
    <span class="md-ellipsis">
      save_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.set_setting" class="md-nav__link">
    <span class="md-ellipsis">
      set_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.set_settings" class="md-nav__link">
    <span class="md-ellipsis">
      set_settings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.state_planer" class="md-nav__link">
    <span class="md-ellipsis">
      state_planer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="state_planer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.state_planner" class="md-nav__link">
    <span class="md-ellipsis">
      state_planner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner" class="md-nav__link">
    <span class="md-ellipsis">
      StatePlanner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StatePlanner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.current_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      current_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.melv_id" class="md-nav__link">
    <span class="md-ellipsis">
      melv_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.previous_state" class="md-nav__link">
    <span class="md-ellipsis">
      previous_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.previous_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      previous_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.recent_events" class="md-nav__link">
    <span class="md-ellipsis">
      recent_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.state_change_time" class="md-nav__link">
    <span class="md-ellipsis">
      state_change_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.submitted_transition_request" class="md-nav__link">
    <span class="md-ellipsis">
      submitted_transition_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.target_state" class="md-nav__link">
    <span class="md-ellipsis">
      target_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.calc_current_location" class="md-nav__link">
    <span class="md-ellipsis">
      calc_current_location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.calc_transition_remaining_time" class="md-nav__link">
    <span class="md-ellipsis">
      calc_transition_remaining_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.control_acquisition" class="md-nav__link">
    <span class="md-ellipsis">
      control_acquisition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_current_state" class="md-nav__link">
    <span class="md-ellipsis">
      get_current_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_image" class="md-nav__link">
    <span class="md-ellipsis">
      get_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_previous_state" class="md-nav__link">
    <span class="md-ellipsis">
      get_previous_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_simulation_speed" class="md-nav__link">
    <span class="md-ellipsis">
      get_simulation_speed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_time_since_state_change" class="md-nav__link">
    <span class="md-ellipsis">
      get_time_since_state_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.model_post_init" class="md-nav__link">
    <span class="md-ellipsis">
      model_post_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.plan_state_switching" class="md-nav__link">
    <span class="md-ellipsis">
      plan_state_switching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.run_get_image" class="md-nav__link">
    <span class="md-ellipsis">
      run_get_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.switch_if_battery_low" class="md-nav__link">
    <span class="md-ellipsis">
      switch_if_battery_low
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.trigger_camera_angle_change" class="md-nav__link">
    <span class="md-ellipsis">
      trigger_camera_angle_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.trigger_state_transition" class="md-nav__link">
    <span class="md-ellipsis">
      trigger_state_transition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.trigger_velocity_change" class="md-nav__link">
    <span class="md-ellipsis">
      trigger_velocity_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.update_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      update_telemetry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.file_log_handler_id" class="md-nav__link">
    <span class="md-ellipsis">
      file_log_handler_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.melvin_notifier" class="md-nav__link">
    <span class="md-ellipsis">
      melvin_notifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.setup_file_logging" class="md-nav__link">
    <span class="md-ellipsis">
      setup_file_logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.setup_logging" class="md-nav__link">
    <span class="md-ellipsis">
      setup_logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rift_console/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rift-Console
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shared/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shared
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#melvonaut" class="md-nav__link">
    <span class="md-ellipsis">
      melvonaut
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.__main__" class="md-nav__link">
    <span class="md-ellipsis">
      __main__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__main__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.current_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      current_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.cancel_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      cancel_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.get_announcements" class="md-nav__link">
    <span class="md-ellipsis">
      get_announcements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.get_observations" class="md-nav__link">
    <span class="md-ellipsis">
      get_observations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.read_images" class="md-nav__link">
    <span class="md-ellipsis">
      read_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.run_get_announcements" class="md-nav__link">
    <span class="md-ellipsis">
      run_get_announcements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.run_get_observations" class="md-nav__link">
    <span class="md-ellipsis">
      run_get_observations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.run_read_images" class="md-nav__link">
    <span class="md-ellipsis">
      run_read_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.__main__.start_event_loop" class="md-nav__link">
    <span class="md-ellipsis">
      start_event_loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.api" class="md-nav__link">
    <span class="md-ellipsis">
      api
    </span>
  </a>
  
    <nav class="md-nav" aria-label="api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.Handler" class="md-nav__link">
    <span class="md-ellipsis">
      Handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.catcher_middleware" class="md-nav__link">
    <span class="md-ellipsis">
      catcher_middleware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.compression_middleware" class="md-nav__link">
    <span class="md-ellipsis">
      compression_middleware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_all_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_all_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_all_images" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_all_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_all_logs" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_all_logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_events" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_clear_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      get_clear_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_cpu_usage" class="md-nav__link">
    <span class="md-ellipsis">
      get_cpu_usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_disk_usage" class="md-nav__link">
    <span class="md-ellipsis">
      get_disk_usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_events" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_events_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_events_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_download_telemetry_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      get_download_telemetry_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_list_images" class="md-nav__link">
    <span class="md-ellipsis">
      get_list_images
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_list_log_files" class="md-nav__link">
    <span class="md-ellipsis">
      get_list_log_files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_melvin_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_melvin_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_memory_usage" class="md-nav__link">
    <span class="md-ellipsis">
      get_memory_usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_reset_settings" class="md-nav__link">
    <span class="md-ellipsis">
      get_reset_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_restart_melvin" class="md-nav__link">
    <span class="md-ellipsis">
      get_restart_melvin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.get_shutdown_melvin" class="md-nav__link">
    <span class="md-ellipsis">
      get_shutdown_melvin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.health" class="md-nav__link">
    <span class="md-ellipsis">
      health
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_clear_log" class="md-nav__link">
    <span class="md-ellipsis">
      post_clear_log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_clear_setting" class="md-nav__link">
    <span class="md-ellipsis">
      post_clear_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_image" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_image_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_image_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_log" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_download_log_and_clear" class="md-nav__link">
    <span class="md-ellipsis">
      post_download_log_and_clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_execute_command" class="md-nav__link">
    <span class="md-ellipsis">
      post_execute_command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_get_setting" class="md-nav__link">
    <span class="md-ellipsis">
      post_get_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_set_melvin_task" class="md-nav__link">
    <span class="md-ellipsis">
      post_set_melvin_task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.post_set_setting" class="md-nav__link">
    <span class="md-ellipsis">
      post_set_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.run_api" class="md-nav__link">
    <span class="md-ellipsis">
      run_api
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.api.setup_routes" class="md-nav__link">
    <span class="md-ellipsis">
      setup_routes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc" class="md-nav__link">
    <span class="md-ellipsis">
      ebt_calc
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ebt_calc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.events" class="md-nav__link">
    <span class="md-ellipsis">
      events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.events--data-4097-7652-2041-5758-8357-688-6220-8553-1075-7245-8989-1669" class="md-nav__link">
    <span class="md-ellipsis">
      data = [(4097, 7652, 2041), (5758, 8357, 688), (6220, 8553, 1075), (7245, 8989, 1669)]
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.max_offset" class="md-nav__link">
    <span class="md-ellipsis">
      max_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.path" class="md-nav__link">
    <span class="md-ellipsis">
      path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.processed" class="md-nav__link">
    <span class="md-ellipsis">
      processed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.res" class="md-nav__link">
    <span class="md-ellipsis">
      res
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.scaling_factor" class="md-nav__link">
    <span class="md-ellipsis">
      scaling_factor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.x_0" class="md-nav__link">
    <span class="md-ellipsis">
      x_0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.x_max" class="md-nav__link">
    <span class="md-ellipsis">
      x_max
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.y_0" class="md-nav__link">
    <span class="md-ellipsis">
      y_0
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.y_max" class="md-nav__link">
    <span class="md-ellipsis">
      y_max
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.distance" class="md-nav__link">
    <span class="md-ellipsis">
      distance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.draw_res" class="md-nav__link">
    <span class="md-ellipsis">
      draw_res
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.f" class="md-nav__link">
    <span class="md-ellipsis">
      f
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.find_matches" class="md-nav__link">
    <span class="md-ellipsis">
      find_matches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.ebt_calc.parse_pings" class="md-nav__link">
    <span class="md-ellipsis">
      parse_pings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      mel_telemetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mel_telemetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry" class="md-nav__link">
    <span class="md-ellipsis">
      MelTelemetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MelTelemetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      timestamp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.model_post_init" class="md-nav__link">
    <span class="md-ellipsis">
      model_post_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.store_observation_csv" class="md-nav__link">
    <span class="md-ellipsis">
      store_observation_csv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.mel_telemetry.MelTelemetry.store_observation_json" class="md-nav__link">
    <span class="md-ellipsis">
      store_observation_json
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.settings" class="md-nav__link">
    <span class="md-ellipsis">
      settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.file_log_handler_id" class="md-nav__link">
    <span class="md-ellipsis">
      file_log_handler_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.settings" class="md-nav__link">
    <span class="md-ellipsis">
      settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings" class="md-nav__link">
    <span class="md-ellipsis">
      Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.API_PORT" class="md-nav__link">
    <span class="md-ellipsis">
      API_PORT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.BATTERY_HIGH_THRESHOLD" class="md-nav__link">
    <span class="md-ellipsis">
      BATTERY_HIGH_THRESHOLD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.BATTERY_LOW_THRESHOLD" class="md-nav__link">
    <span class="md-ellipsis">
      BATTERY_LOW_THRESHOLD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.CURRENT_MELVIN_TASK" class="md-nav__link">
    <span class="md-ellipsis">
      CURRENT_MELVIN_TASK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DISCORD_ALERTS_ENABLED" class="md-nav__link">
    <span class="md-ellipsis">
      DISCORD_ALERTS_ENABLED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DISCORD_WEBHOOK_TOKEN" class="md-nav__link">
    <span class="md-ellipsis">
      DISCORD_WEBHOOK_TOKEN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DISTANCE_BETWEEN_IMAGES" class="md-nav__link">
    <span class="md-ellipsis">
      DISTANCE_BETWEEN_IMAGES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DO_ACTUALLY_EXIT" class="md-nav__link">
    <span class="md-ellipsis">
      DO_ACTUALLY_EXIT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.DO_TIMING_CHECK" class="md-nav__link">
    <span class="md-ellipsis">
      DO_TIMING_CHECK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.FILE_LOGGING_LEVEL" class="md-nav__link">
    <span class="md-ellipsis">
      FILE_LOGGING_LEVEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.NETWORK_SIM_ENABLED" class="md-nav__link">
    <span class="md-ellipsis">
      NETWORK_SIM_ENABLED
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.OBSERVATION_REFRESH_RATE" class="md-nav__link">
    <span class="md-ellipsis">
      OBSERVATION_REFRESH_RATE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.OVERRIDES" class="md-nav__link">
    <span class="md-ellipsis">
      OVERRIDES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.START_TIME" class="md-nav__link">
    <span class="md-ellipsis">
      START_TIME
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.STOP_TIME" class="md-nav__link">
    <span class="md-ellipsis">
      STOP_TIME
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_ANGLE_DEG" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_ANGLE_DEG
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_CAMERA_ANGLE_ACQUISITION" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_CAMERA_ANGLE_ACQUISITION
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NARROW_X" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NARROW_X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NARROW_Y" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NARROW_Y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NORMAL_X" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NORMAL_X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_NORMAL_Y" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_NORMAL_Y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_WIDE_X" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_WIDE_X
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TARGET_SPEED_WIDE_Y" class="md-nav__link">
    <span class="md-ellipsis">
      TARGET_SPEED_WIDE_Y
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TERMINAL_LOGGING_LEVEL" class="md-nav__link">
    <span class="md-ellipsis">
      TERMINAL_LOGGING_LEVEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.TRACING" class="md-nav__link">
    <span class="md-ellipsis">
      TRACING
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.__getattribute__" class="md-nav__link">
    <span class="md-ellipsis">
      __getattribute__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.__setattr__" class="md-nav__link">
    <span class="md-ellipsis">
      __setattr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.clear_settings" class="md-nav__link">
    <span class="md-ellipsis">
      clear_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.delete_settings" class="md-nav__link">
    <span class="md-ellipsis">
      delete_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.get_default_setting" class="md-nav__link">
    <span class="md-ellipsis">
      get_default_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.get_setting" class="md-nav__link">
    <span class="md-ellipsis">
      get_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.init_settings" class="md-nav__link">
    <span class="md-ellipsis">
      init_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.load_settings" class="md-nav__link">
    <span class="md-ellipsis">
      load_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.save_settings" class="md-nav__link">
    <span class="md-ellipsis">
      save_settings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.set_setting" class="md-nav__link">
    <span class="md-ellipsis">
      set_setting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.settings.Settings.set_settings" class="md-nav__link">
    <span class="md-ellipsis">
      set_settings
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.state_planer" class="md-nav__link">
    <span class="md-ellipsis">
      state_planer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="state_planer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.state_planner" class="md-nav__link">
    <span class="md-ellipsis">
      state_planner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner" class="md-nav__link">
    <span class="md-ellipsis">
      StatePlanner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StatePlanner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.current_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      current_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.melv_id" class="md-nav__link">
    <span class="md-ellipsis">
      melv_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.previous_state" class="md-nav__link">
    <span class="md-ellipsis">
      previous_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.previous_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      previous_telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.recent_events" class="md-nav__link">
    <span class="md-ellipsis">
      recent_events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.state_change_time" class="md-nav__link">
    <span class="md-ellipsis">
      state_change_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.submitted_transition_request" class="md-nav__link">
    <span class="md-ellipsis">
      submitted_transition_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.target_state" class="md-nav__link">
    <span class="md-ellipsis">
      target_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.calc_current_location" class="md-nav__link">
    <span class="md-ellipsis">
      calc_current_location
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.calc_transition_remaining_time" class="md-nav__link">
    <span class="md-ellipsis">
      calc_transition_remaining_time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.control_acquisition" class="md-nav__link">
    <span class="md-ellipsis">
      control_acquisition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_current_state" class="md-nav__link">
    <span class="md-ellipsis">
      get_current_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_image" class="md-nav__link">
    <span class="md-ellipsis">
      get_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_previous_state" class="md-nav__link">
    <span class="md-ellipsis">
      get_previous_state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_simulation_speed" class="md-nav__link">
    <span class="md-ellipsis">
      get_simulation_speed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.get_time_since_state_change" class="md-nav__link">
    <span class="md-ellipsis">
      get_time_since_state_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.model_post_init" class="md-nav__link">
    <span class="md-ellipsis">
      model_post_init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.plan_state_switching" class="md-nav__link">
    <span class="md-ellipsis">
      plan_state_switching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.run_get_image" class="md-nav__link">
    <span class="md-ellipsis">
      run_get_image
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.switch_if_battery_low" class="md-nav__link">
    <span class="md-ellipsis">
      switch_if_battery_low
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.trigger_camera_angle_change" class="md-nav__link">
    <span class="md-ellipsis">
      trigger_camera_angle_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.trigger_state_transition" class="md-nav__link">
    <span class="md-ellipsis">
      trigger_state_transition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.trigger_velocity_change" class="md-nav__link">
    <span class="md-ellipsis">
      trigger_velocity_change
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.state_planer.StatePlanner.update_telemetry" class="md-nav__link">
    <span class="md-ellipsis">
      update_telemetry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#melvonaut.utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label="utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.file_log_handler_id" class="md-nav__link">
    <span class="md-ellipsis">
      file_log_handler_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.melvin_notifier" class="md-nav__link">
    <span class="md-ellipsis">
      melvin_notifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.setup_file_logging" class="md-nav__link">
    <span class="md-ellipsis">
      setup_file_logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#melvonaut.utils.setup_logging" class="md-nav__link">
    <span class="md-ellipsis">
      setup_logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="melvonaut-reference">Melvonaut Reference<a class="headerlink" href="#melvonaut-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="melvonaut"></a>
    <div class="doc doc-contents first">

        <p>Ciarc.</p>









  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="melvonaut.__main__" class="doc doc-heading">
            <code>__main__</code>


<a href="#melvonaut.__main__" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

        <p>Melvonaut
:author: Jonathan Decker</p>









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.__main__.current_telemetry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_telemetry</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.__main__.current_telemetry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.cancel_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cancel_tasks</span><span class="p">()</span></code>

<a href="#melvonaut.__main__.cancel_tasks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Cancels all tasks and event loop.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cancel_tasks</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cancels all tasks and event loop.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">all_tasks</span><span class="p">():</span>
        <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.get_announcements" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_announcements</span><span class="p">(</span><span class="n">last_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.__main__.get_announcements" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Fetches announcements asynchronously with event-stream handling.</p>
<p>This function continuously listens for new announcements from the API and processes them.
If announcements are received, they are logged and stored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>last_id</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the last processed event to resume from, if applicable.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[str]: The ID of the last received announcement, or None if an error occurs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_announcements</span><span class="p">(</span><span class="n">last_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fetches announcements asynchronously with event-stream handling.</span>

<span class="sd">    This function continuously listens for new announcements from the API and processes them.</span>
<span class="sd">    If announcements are received, they are logged and stored.</span>

<span class="sd">    Args:</span>
<span class="sd">        last_id (Optional[str]): The ID of the last processed event to resume from, if applicable.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[str]: The ID of the last received announcement, or None if an error occurs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">content_line_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\[(\d+)]\s*(.*)$&quot;</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;text/event-stream&quot;</span><span class="p">,</span> <span class="s2">&quot;Cache-Control&quot;</span><span class="p">:</span> <span class="s2">&quot;no-cache&quot;</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">last_id</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Last-Event-ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_id</span>

    <span class="n">timeout</span> <span class="o">=</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientTimeout</span><span class="p">(</span>
        <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sock_connect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sock_read</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">con</span><span class="o">.</span><span class="n">ANNOUNCEMENTS_ENDPOINT</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">301</span><span class="p">,</span> <span class="mi">307</span><span class="p">]:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get announcements: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="k">return</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># logger.error(response.content)</span>
                    <span class="c1"># async for line in response.content:</span>
                    <span class="c1">#    logger.error(line)</span>
                    <span class="k">async</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
                        <span class="n">line_decoded</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                        <span class="c1"># logger.warning(f&quot;Received announcement {line}&quot;)</span>
                        <span class="c1"># logger.warning(f&quot;Location is: {state_planner.calc_current_location()}&quot;)</span>
                        <span class="c1"># logger.warning(f&quot;Received announcement with content:{line_decoded}&quot;)</span>
                        <span class="n">line_filtered</span> <span class="o">=</span> <span class="n">line_decoded</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;data:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                        <span class="n">match</span> <span class="o">=</span> <span class="n">content_line_regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line_filtered</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                            <span class="n">line_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                            <span class="n">line_content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
                            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
                            <span class="n">current_x</span><span class="p">,</span> <span class="n">current_y</span> <span class="o">=</span> <span class="n">state_planner</span><span class="o">.</span><span class="n">calc_current_location</span><span class="p">()</span>

                            <span class="n">current_event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">=</span><span class="n">line_content</span><span class="p">,</span>
                                <span class="nb">id</span><span class="o">=</span><span class="n">line_id</span><span class="p">,</span>
                                <span class="n">timestamp</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span>
                                <span class="n">current_x</span><span class="o">=</span><span class="n">current_x</span><span class="p">,</span>
                                <span class="n">current_y</span><span class="o">=</span><span class="n">current_y</span><span class="p">,</span>
                            <span class="p">)</span>

                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Received announcement: </span><span class="si">{</span><span class="n">current_event</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                            <span class="p">)</span>
                            <span class="k">await</span> <span class="n">current_event</span><span class="o">.</span><span class="n">to_csv</span><span class="p">()</span>
                            <span class="n">state_planner</span><span class="o">.</span><span class="n">recent_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_event</span><span class="p">)</span>
                            <span class="n">last_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_event</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Announcements subscription timed out&quot;</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
                <span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">session</span><span class="o">.</span><span class="n">closed</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">last_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.get_observations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_observations</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.__main__.get_observations" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Async get observations from the Melvin API and update the state planner</p>
<p>This function establishes a session with the API and retrieves observation data.
If the response is successful, it updates the telemetry state.
If any errors occur, they are logged accordingly.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_observations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Async get observations from the Melvin API and update the state planner</span>

<span class="sd">    This function establishes a session with the API and retrieves observation data.</span>
<span class="sd">    If the response is successful, it updates the telemetry state.</span>
<span class="sd">    If any errors occur, they are logged accordingly.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">OBSERVATION_ENDPOINT</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="n">json_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                    <span class="c1"># logger.debug(&quot;Received observations&quot;)</span>
                    <span class="c1"># pprint(json_response, indent=4, sort_dicts=True)</span>
                    <span class="k">await</span> <span class="n">state_planner</span><span class="o">.</span><span class="n">update_telemetry</span><span class="p">(</span><span class="n">MelTelemetry</span><span class="p">(</span><span class="o">**</span><span class="n">json_response</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get observations: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">client_exceptions</span><span class="o">.</span><span class="n">ConnectionTimeoutError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Observations endpoint timeouted.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;ASyncio TimeoutError occured.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">client_exceptions</span><span class="o">.</span><span class="n">ClientOSError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Client_exceptions.ClienOSError occured.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#melvonaut.__main__.main" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Melvonaut.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">version_option</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Melvonaut.&quot;&quot;&quot;</span>
    <span class="n">utils</span><span class="o">.</span><span class="n">setup_logging</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting Melvonaut...&quot;</span><span class="p">)</span>

    <span class="n">start_event_loop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.read_images" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">read_images</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.__main__.read_images" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Reads image files asynchronously from a designated directory.</p>
<p>This function iterates over stored images, extracts metadata from filenames, and
yields <code>MelvinImage</code> objects.</p>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MelvinImage</code></td>            <td>
                  <code><span title="typing.AsyncIterable">AsyncIterable</span>[<a class="autorefs autorefs-internal" title="MelvinImage (shared.models.MelvinImage)" href="../shared/#shared.models.MelvinImage">MelvinImage</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An image object containing extracted metadata.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">read_images</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">AsyncIterable</span><span class="p">[</span><span class="n">MelvinImage</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads image files asynchronously from a designated directory.</span>

<span class="sd">    This function iterates over stored images, extracts metadata from filenames, and</span>
<span class="sd">    yields `MelvinImage` objects.</span>

<span class="sd">    Yields:</span>
<span class="sd">        MelvinImage: An image object containing extracted metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;image_melvonaut_angle_(\w+)_x_(\d+\.\d+)_y_(\d+\.\d+)_(\d</span><span class="si">{4}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">_\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">-\d</span><span class="si">{2}</span><span class="s2">)\.png&quot;</span>

    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.png&quot;</span><span class="p">):</span>
            <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">image_path</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to read </span><span class="si">{</span><span class="n">image_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse </span><span class="si">{</span><span class="n">image_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="n">CameraAngle</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">cor_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
                <span class="n">cor_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
                <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H-%M-%S&quot;</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">MelvinImage</span><span class="p">(</span>
                    <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="n">angle</span><span class="p">,</span> <span class="n">cor_x</span><span class="o">=</span><span class="n">cor_x</span><span class="p">,</span> <span class="n">cor_y</span><span class="o">=</span><span class="n">cor_y</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.run_get_announcements" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_get_announcements</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.__main__.run_get_announcements" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Continuously fetches announcements from the API.</p>
<p>This function runs in an infinite loop, restarting the subscription when needed.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_get_announcements</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Continuously fetches announcements from the API.</span>

<span class="sd">    This function runs in an infinite loop, restarting the subscription when needed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Started announcements subscription&quot;</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">get_announcements</span><span class="p">())</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Restarted announcements subscription&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.run_get_observations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_get_observations</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.__main__.run_get_observations" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Runs the observation fetching function in a loop.</p>
<p>This function repeatedly fetches observations based on a specified refresh rate,
adjusting for simulation speed.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_get_observations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the observation fetching function in a loop.</span>

<span class="sd">    This function repeatedly fetches observations based on a specified refresh rate,</span>
<span class="sd">    adjusting for simulation speed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="n">get_observations</span><span class="p">()</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># logger.debug(&quot;Submitted observations request&quot;)</span>
        <span class="n">observe_task</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span>
            <span class="o">/</span> <span class="n">state_planner</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">(),</span>
            <span class="n">callback</span><span class="o">=</span><span class="n">get_observations</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_task</span><span class="p">()</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">observe_task</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.run_read_images" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_read_images</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.__main__.run_read_images" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Log all receives images.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_read_images</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log all receives images.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">read_images</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received image: </span><span class="si">{</span><span class="n">image</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.__main__.start_event_loop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_event_loop</span><span class="p">()</span></code>

<a href="#melvonaut.__main__.start_event_loop" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initializes and starts the asynchronous event loop.</p>
<p>This function sets up signal handlers, registers tasks for fetching observations,
announcements, and API interactions, and starts the event loop.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/__main__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">start_event_loop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes and starts the asynchronous event loop.</span>

<span class="sd">    This function sets up signal handlers, registers tasks for fetching observations,</span>
<span class="sd">    announcements, and API interactions, and starts the event loop.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">uvloop</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">):</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">add_signal_handler</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">cancel_tasks</span><span class="p">)</span>

    <span class="n">loop</span><span class="o">.</span><span class="n">set_default_executor</span><span class="p">(</span><span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

    <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">run_get_observations</span><span class="p">())</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">run_get_announcements</span><span class="p">())</span>

    <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">api</span><span class="o">.</span><span class="n">run_api</span><span class="p">())</span>

    <span class="c1"># loop.create_task(run_read_images())</span>

    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">sig</span> <span class="ow">in</span> <span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIGTERM</span><span class="p">):</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">remove_signal_handler</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Shutting down Melvonaut...&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="melvonaut.api" class="doc doc-heading">
            <code>api</code>


<a href="#melvonaut.api" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.api.Handler" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">Handler</span> <span class="o">=</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">],</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">web</span><span class="o">.</span><span class="n">StreamResponse</span><span class="p">]]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.api.Handler" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.catcher_middleware" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">catcher_middleware</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.catcher_middleware" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Middleware to catch and log unhandled exceptions in request handling.</p>
<p>If an exception occurs while processing the request, this middleware
logs the error and returns a 500 Internal Server Error response
with the error message.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Handler = Callable[[web.Request], Awaitable[web.StreamResponse]]

  
      module-attribute
   (melvonaut.api.Handler)" href="#melvonaut.api.Handler">Handler</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The next request handler in the middleware chain.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTTP response from the handler, or a 500 error response</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if an exception occurs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@web</span><span class="o">.</span><span class="n">middleware</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">catcher_middleware</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Handler</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Middleware to catch and log unhandled exceptions in request handling.</span>

<span class="sd">    If an exception occurs while processing the request, this middleware</span>
<span class="sd">    logs the error and returns a 500 Internal Server Error response</span>
<span class="sd">    with the error message.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>
<span class="sd">        handler (Handler): The next request handler in the middleware chain.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The HTTP response from the handler, or a 500 error response</span>
<span class="sd">        if an exception occurs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.compression_middleware" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compression_middleware</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.compression_middleware" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Middleware to handle response compression using gzip or deflate.</p>
<p>This middleware checks the <code>Accept-Encoding</code> header of the request
to determine if the client supports gzip or deflate compression.
If supported, it applies the corresponding compression to the response.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>handler</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Handler = Callable[[web.Request], Awaitable[web.StreamResponse]]

  
      module-attribute
   (melvonaut.api.Handler)" href="#melvonaut.api.Handler">Handler</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The next request handler in the middleware chain.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The compressed HTTP response if the client supports it,</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>otherwise the original response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@web</span><span class="o">.</span><span class="n">middleware</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">compression_middleware</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Handler</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Middleware to handle response compression using gzip or deflate.</span>

<span class="sd">    This middleware checks the `Accept-Encoding` header of the request</span>
<span class="sd">    to determine if the client supports gzip or deflate compression.</span>
<span class="sd">    If supported, it applies the corresponding compression to the response.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>
<span class="sd">        handler (Handler): The next request handler in the middleware chain.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The compressed HTTP response if the client supports it,</span>
<span class="sd">        otherwise the original response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">accept_encoding</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hdrs</span><span class="o">.</span><span class="n">ACCEPT_ENCODING</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">ContentCoding</span><span class="o">.</span><span class="n">gzip</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="n">accept_encoding</span><span class="p">:</span>
        <span class="n">compressor</span> <span class="o">=</span> <span class="n">ContentCoding</span><span class="o">.</span><span class="n">gzip</span><span class="o">.</span><span class="n">value</span>
    <span class="k">elif</span> <span class="n">ContentCoding</span><span class="o">.</span><span class="n">deflate</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="n">accept_encoding</span><span class="p">:</span>
        <span class="n">compressor</span> <span class="o">=</span> <span class="n">ContentCoding</span><span class="o">.</span><span class="n">deflate</span><span class="o">.</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="n">hdrs</span><span class="o">.</span><span class="n">CONTENT_ENCODING</span><span class="p">]</span> <span class="o">=</span> <span class="n">compressor</span>
    <span class="n">resp</span><span class="o">.</span><span class="n">enable_compression</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">resp</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_all_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_all_settings</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_all_settings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve all settings configured in the system.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing all system settings.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_all_settings</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve all settings configured in the system.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing all system settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting all settings&quot;</span><span class="p">)</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">isupper</span><span class="p">()]</span>
    <span class="n">all_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">float</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">:</span>
            <span class="n">all_settings</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
            <span class="n">all_settings</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">all_settings</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span><span class="n">all_settings</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_clear_all_images" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_clear_all_images</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_clear_all_images" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Clears all stored images.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing a list of cleared images.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_clear_all_images</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clears all stored images.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing a list of cleared images.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing all images&quot;</span><span class="p">)</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH_BASE</span><span class="p">)</span>
    <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">folder</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*.png&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">()]</span>
    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
        <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_clear_all_logs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_clear_all_logs</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_clear_all_logs" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Clears all log files in the system.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing a list of cleared log files.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_clear_all_logs</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clears all log files in the system.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing a list of cleared log files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing all log files&quot;</span><span class="p">)</span>
        <span class="n">log_files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">folder</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_LOG_PATH</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">folder</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.log&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">log_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">setup_file_logging</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;Cleared_files&quot;</span><span class="p">:</span> <span class="n">log_files</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span> <span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_clear_events" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_clear_events</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_clear_events" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Deletes the event log file from the system.</p>
<p>If the event log file exists, it is deleted. If it does not exist, a 404 response is returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A 200 response if the file is successfully deleted.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A 404 response if the file is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_clear_events</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes the event log file from the system.</span>

<span class="sd">    If the event log file exists, it is deleted. If it does not exist, a 404 response is returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A 200 response if the file is successfully deleted.</span>
<span class="sd">        web.Response: A 404 response if the file is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing events&quot;</span><span class="p">)</span>
    <span class="n">events_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">EVENT_LOCATION_CSV</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">events_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">events_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_clear_telemetry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_clear_telemetry</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_clear_telemetry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Clears the telemetry data file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A success response if the file is deleted, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_clear_telemetry</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clears the telemetry data file.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A success response if the file is deleted, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing telemetry&quot;</span><span class="p">)</span>
    <span class="n">telemetry_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">telemetry_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">telemetry_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_cpu_usage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_cpu_usage</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_cpu_usage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve CPU usage statistics.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing CPU usage data including user, system, idle time, percent usage, core count, and frequency.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_cpu_usage</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve CPU usage statistics.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing CPU usage data including user, system, idle time, percent usage, core count, and frequency.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting CPU usage&quot;</span><span class="p">)</span>
    <span class="n">cpu_usage</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_times</span><span class="p">()</span>
    <span class="n">cpu_percent</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_percent</span><span class="p">()</span>
    <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
    <span class="n">cpu_freq</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">cpu_freq</span><span class="p">()</span>
    <span class="n">cpu</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">cpu_usage</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
        <span class="s2">&quot;system&quot;</span><span class="p">:</span> <span class="n">cpu_usage</span><span class="o">.</span><span class="n">system</span><span class="p">,</span>
        <span class="s2">&quot;idle&quot;</span><span class="p">:</span> <span class="n">cpu_usage</span><span class="o">.</span><span class="n">idle</span><span class="p">,</span>
        <span class="s2">&quot;percent&quot;</span><span class="p">:</span> <span class="n">cpu_percent</span><span class="p">,</span>
        <span class="s2">&quot;physical_cores&quot;</span><span class="p">:</span> <span class="n">cpu_count</span><span class="p">,</span>
        <span class="s2">&quot;current_freq&quot;</span><span class="p">:</span> <span class="n">cpu_freq</span><span class="o">.</span><span class="n">current</span><span class="p">,</span>
        <span class="s2">&quot;max_freq&quot;</span><span class="p">:</span> <span class="n">cpu_freq</span><span class="o">.</span><span class="n">max</span><span class="p">,</span>
        <span class="s2">&quot;min_freq&quot;</span><span class="p">:</span> <span class="n">cpu_freq</span><span class="o">.</span><span class="n">min</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span><span class="n">cpu</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_disk_usage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_disk_usage</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_disk_usage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve disk usage statistics for root and home directories.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing disk usage data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_disk_usage</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve disk usage statistics for root and home directories.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing disk usage data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting disk usage&quot;</span><span class="p">)</span>
    <span class="n">disk_root</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">disk_usage</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="n">disk_home</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">disk_usage</span><span class="p">(</span><span class="s2">&quot;/home&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;root&quot;</span><span class="p">:</span> <span class="n">disk_root</span><span class="o">.</span><span class="n">_asdict</span><span class="p">(),</span> <span class="s2">&quot;home&quot;</span><span class="p">:</span> <span class="n">disk_home</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()},</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_download_events" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_download_events</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_download_events" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles the download of event logs.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span> | <span title="aiohttp.web.FileResponse">FileResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.FileResponse: The requested event log file if it exists.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span> | <span title="aiohttp.web.FileResponse">FileResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A 404 response if the file is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_download_events</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span> <span class="o">|</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles the download of event logs.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.FileResponse: The requested event log file if it exists.</span>
<span class="sd">        web.Response: A 404 response if the file is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Downloading events&quot;</span><span class="p">)</span>
    <span class="n">events_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">EVENT_LOCATION_CSV</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">events_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">(</span><span class="n">events_file</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_download_events_and_clear" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_download_events_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_download_events_and_clear" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Downloads and clears the event log file.</p>
<p>This function retrieves the event log file, sends its content as a response,
and then deletes the file from the system.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A response containing the event log content if found.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A 404 response if the file is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_download_events_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Downloads and clears the event log file.</span>

<span class="sd">    This function retrieves the event log file, sends its content as a response,</span>
<span class="sd">    and then deletes the file from the system.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A response containing the event log content if found.</span>
<span class="sd">        web.Response: A 404 response if the file is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Downloading events and clearing&quot;</span><span class="p">)</span>
    <span class="n">events_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">EVENT_LOCATION_CSV</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">events_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">events_file_content</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">events_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">events_file_content</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">events_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_download_telemetry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_download_telemetry</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_download_telemetry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles telemetry data download requests.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span> | <span title="aiohttp.web.FileResponse">FileResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: The telemetry file if it exists, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_download_telemetry</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span> <span class="o">|</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles telemetry data download requests.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: The telemetry file if it exists, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Downloading telemetry&quot;</span><span class="p">)</span>
    <span class="n">telemetry_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">telemetry_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">(</span><span class="n">telemetry_file</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_download_telemetry_and_clear" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_download_telemetry_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_download_telemetry_and_clear" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles telemetry data download requests and deletes the file after serving it.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: The telemetry file if it exists, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_download_telemetry_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles telemetry data download requests and deletes the file after serving it.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: The telemetry file if it exists, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Downloading telemetry and clearing&quot;</span><span class="p">)</span>
    <span class="n">telemetry_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">telemetry_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">telemetry_file_content</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">telemetry_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">telemetry_file_content</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">telemetry_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_list_images" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_list_images</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_list_images" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Lists all available image files.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing a list of image filenames.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_list_images</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lists all available image files.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing a list of image filenames.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Listing images&quot;</span><span class="p">)</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH_BASE</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">folder</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Folder not found: </span><span class="si">{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">folder</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*.png&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">()]</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;images&quot;</span><span class="p">:</span> <span class="n">images</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_list_log_files" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_list_log_files</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_list_log_files" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve a list of log files from the log directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing a list of log filenames.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_list_log_files</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a list of log files from the log directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing a list of log filenames.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Listing log files&quot;</span><span class="p">)</span>
    <span class="n">log_files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_LOG_PATH</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">folder</span><span class="o">.</span><span class="n">iterdir</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">file</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.log&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">log_files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span> <span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;log_files&quot;</span><span class="p">:</span> <span class="n">log_files</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_melvin_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_melvin_version</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_melvin_version" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve the current version of the Melvin service.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing the Melvin service version.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_melvin_version</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve the current version of the Melvin service.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing the Melvin service version.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">importlib</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">version</span><span class="p">(</span><span class="s2">&quot;ciarc&quot;</span><span class="p">)},</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_memory_usage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_memory_usage</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_memory_usage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieve memory usage statistics.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing memory usage data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_memory_usage</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve memory usage statistics.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing memory usage data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting memory usage&quot;</span><span class="p">)</span>
    <span class="n">memory_usage</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span><span class="n">memory_usage</span><span class="o">.</span><span class="n">_asdict</span><span class="p">(),</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_reset_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_reset_settings</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_reset_settings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Resets all settings to their default values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A success response confirming the reset.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_reset_settings</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resets all settings to their default values.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A success response confirming the reset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Resetting settings&quot;</span><span class="p">)</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">clear_settings</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_restart_melvin" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_restart_melvin</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_restart_melvin" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles a request to restart the Melvin service.</p>
<p>This endpoint is not yet implemented and always returns a 501 Not Implemented response.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A response indicating that the operation is not implemented.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_restart_melvin</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles a request to restart the Melvin service.</span>

<span class="sd">    This endpoint is not yet implemented and always returns a 501 Not Implemented response.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A response indicating that the operation is not implemented.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">501</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Not Implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.get_shutdown_melvin" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_shutdown_melvin</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.get_shutdown_melvin" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles a request to shut down the Melvin service.</p>
<p>If <code>settings.DO_ACTUALLY_EXIT</code> is set to True, the event loop is stopped,
all pending tasks are canceled, and the process exits. Otherwise, a warning is logged.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A response with status 200 indicating the shutdown request was received.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_shutdown_melvin</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles a request to shut down the Melvin service.</span>

<span class="sd">    If `settings.DO_ACTUALLY_EXIT` is set to True, the event loop is stopped,</span>
<span class="sd">    all pending tasks are canceled, and the process exits. Otherwise, a warning is logged.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A response with status 200 indicating the shutdown request was received.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DO_ACTUALLY_EXIT</span><span class="p">:</span>
            <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>
            <span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="n">pending_tasks</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">all_tasks</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">pending_tasks</span><span class="p">:</span>
                <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
            <span class="n">exit</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Requested shutdown, but not actually exiting&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.health" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">health</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.health" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Check if the API is running and healthy.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A response with status 200 and text "OK".</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">health</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the API is running and healthy.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A response with status 200 and text &quot;OK&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_clear_log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_clear_log</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_clear_log" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles log file deletion requests.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the log file name in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A success response if the log file is cleared, otherwise an error response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_clear_log</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles log file deletion requests.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the log file name in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A success response if the log file is cleared, otherwise an error response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Clearing log: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">log_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_LOG_PATH</span><span class="p">)</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">log_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">log_file</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2"> is a directory&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">log_file</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.log&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2"> is not a log file&quot;</span><span class="p">)</span>
        <span class="n">log_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">setup_file_logging</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2"> cleared&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">log_file</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_clear_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_clear_setting</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_clear_setting" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Clears a specific setting.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the setting name in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A success response if the setting is cleared.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_clear_setting</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clears a specific setting.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the setting name in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A success response if the setting is cleared.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing settings&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Clearing settings: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">delete_settings</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_download_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_download_image</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_download_image" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles image file download requests.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the image filename in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span> | <span title="aiohttp.web.FileResponse">FileResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: The requested image file if it exists, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_download_image</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span> <span class="o">|</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles image file download requests.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the image filename in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: The requested image file if it exists, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading image: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">image_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH_BASE</span><span class="p">)</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">image_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">(</span><span class="n">image_file</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_download_image_and_clear" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_download_image_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_download_image_and_clear" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles image file download requests and deletes the file after serving it.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the image filename in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: The requested image file if it exists, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_download_image_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles image file download requests and deletes the file after serving it.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the image filename in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: The requested image file if it exists, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading image and clearing: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">image_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH_BASE</span><span class="p">)</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">image_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">image_file_content</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">image_file</span><span class="o">.</span><span class="n">read_bytes</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">image_file_content</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">image_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_download_log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_download_log</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_download_log" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles log file download requests.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the log file name in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span> | <span title="aiohttp.web.FileResponse">FileResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: The requested log file if it exists, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_download_log</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span> <span class="o">|</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles log file download requests.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the log file name in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: The requested log file if it exists, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading log: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">log_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_LOG_PATH</span><span class="p">)</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">log_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">FileResponse</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_download_log_and_clear" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_download_log_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_download_log_and_clear" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Handles log file download requests and deletes the file after serving it.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the log file name in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: The requested log file if it exists, otherwise a 404 response.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_download_log_and_clear</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles log file download requests and deletes the file after serving it.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the log file name in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: The requested log file if it exists, otherwise a 404 response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading log and clearing: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">log_file</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_LOG_PATH</span><span class="p">)</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">log_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">log_file_content</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">log_file</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">log_file_content</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">log_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">setup_file_logging</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;File not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_execute_command" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_execute_command</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_execute_command" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Execute a shell command asynchronously.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing JSON data with the command to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing command output and return code.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_execute_command</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute a shell command asynchronously.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing JSON data with the command to execute.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing command output and return code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cmd&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing command: </span><span class="si">{</span><span class="n">cmd</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">process</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">create_subprocess_shell</span><span class="p">(</span>
            <span class="n">cmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">asyncio</span><span class="o">.</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
        <span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="k">await</span> <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
        <span class="k">await</span> <span class="n">process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="n">return_code</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">returncode</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Command output: </span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">,</span> <span class="s2">&quot;return_code&quot;</span><span class="p">:</span> <span class="n">return_code</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">TimeoutError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Timeout&quot;</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;Cancelled&quot;</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">({</span><span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">output</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span> <span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_get_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_get_setting</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_get_setting" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Retrieves a specific setting.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the setting name in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: JSON response containing the requested setting value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_get_setting</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves a specific setting.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the setting name in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: JSON response containing the requested setting value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting settings&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requested settings: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">response_settings</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">response_settings</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Setting not found: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response settings: </span><span class="si">{</span><span class="n">response_settings</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">json_response</span><span class="p">(</span><span class="n">response_settings</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_set_melvin_task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_set_melvin_task</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_set_melvin_task" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets a task for Melvin (a task management system).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing the task details in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A success response if the task is set.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_set_melvin_task</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets a task for Melvin (a task management system).</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing the task details in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A success response if the task is set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting melvin task: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">task</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Missing field task&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Missing field task&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">melvin_task</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">MELVINTask</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Invalid task&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Invalid task&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error setting melvin task: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">set_settings</span><span class="p">({</span><span class="s2">&quot;CURRENT_MELVIN_TASK&quot;</span><span class="p">:</span> <span class="n">melvin_task</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.post_set_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_set_setting</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.post_set_setting" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets a new configuration setting.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>request</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Request">Request</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The incoming HTTP request containing settings in JSON format.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="aiohttp.web.Response">Response</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>web.Response: A success response if the setting is applied.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_set_setting</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets a new configuration setting.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (web.Request): The incoming HTTP request containing settings in JSON format.</span>

<span class="sd">    Returns:</span>
<span class="sd">        web.Response: A success response if the setting is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting settings&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting settings: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">set_settings</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">web</span><span class="o">.</span><span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.run_api" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_api</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.api.run_api" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Starts the web API server.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_api</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Starts the web API server.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting up API server&quot;</span><span class="p">)</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">init_settings</span><span class="p">()</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">(</span><span class="n">middlewares</span><span class="o">=</span><span class="p">[</span><span class="n">compression_middleware</span><span class="p">,</span> <span class="n">catcher_middleware</span><span class="p">])</span>
    <span class="n">setup_routes</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="n">runner</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">AppRunner</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">runner</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
    <span class="n">site</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">TCPSite</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span> <span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">API_PORT</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;API server started on port </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">API_PORT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">site</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;API server started&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># das hat bei mir direkt nach dem start ausgelöst</span>
        <span class="c1"># logger.debug(&quot;Shutting down API server&quot;)</span>
        <span class="c1"># await runner.cleanup()</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.api.setup_routes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_routes</span><span class="p">(</span><span class="n">app</span><span class="p">)</span></code>

<a href="#melvonaut.api.setup_routes" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets up API routes for the web application.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>app</code>
            </td>
            <td>
                  <code><span title="aiohttp.web.Application">Application</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The web application instance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_routes</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">web</span><span class="o">.</span><span class="n">Application</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets up API routes for the web application.</span>

<span class="sd">    Args:</span>
<span class="sd">        app (web.Application): The web application instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_download_log&quot;</span><span class="p">,</span> <span class="n">post_download_log</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_download_telemetry&quot;</span><span class="p">,</span> <span class="n">get_download_telemetry</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_download_events&quot;</span><span class="p">,</span> <span class="n">get_download_events</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_download_image&quot;</span><span class="p">,</span> <span class="n">post_download_image</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_set_melvin_task&quot;</span><span class="p">,</span> <span class="n">post_set_melvin_task</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_reset_settings&quot;</span><span class="p">,</span> <span class="n">get_reset_settings</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_set_setting&quot;</span><span class="p">,</span> <span class="n">post_set_setting</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_clear_setting&quot;</span><span class="p">,</span> <span class="n">post_clear_setting</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_clear_log&quot;</span><span class="p">,</span> <span class="n">post_clear_log</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_get_setting&quot;</span><span class="p">,</span> <span class="n">post_get_setting</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_all_settings&quot;</span><span class="p">,</span> <span class="n">get_all_settings</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_download_log_and_clear&quot;</span><span class="p">,</span> <span class="n">post_download_log_and_clear</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span>
        <span class="s2">&quot;/api/get_download_telemetry_and_clear&quot;</span><span class="p">,</span> <span class="n">get_download_telemetry_and_clear</span>
    <span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span>
        <span class="s2">&quot;/api/get_download_events_and_clear&quot;</span><span class="p">,</span> <span class="n">get_download_events_and_clear</span>
    <span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span>
        <span class="s2">&quot;/api/post_download_image_and_clear&quot;</span><span class="p">,</span> <span class="n">post_download_image_and_clear</span>
    <span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_clear_all_logs&quot;</span><span class="p">,</span> <span class="n">get_clear_all_logs</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_clear_telemetry&quot;</span><span class="p">,</span> <span class="n">get_clear_telemetry</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_clear_events&quot;</span><span class="p">,</span> <span class="n">get_clear_events</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_clear_all_images&quot;</span><span class="p">,</span> <span class="n">get_clear_all_images</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/health&quot;</span><span class="p">,</span> <span class="n">health</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_disk_usage&quot;</span><span class="p">,</span> <span class="n">get_disk_usage</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_memory_usage&quot;</span><span class="p">,</span> <span class="n">get_memory_usage</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_cpu_usage&quot;</span><span class="p">,</span> <span class="n">get_cpu_usage</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_restart_melvin&quot;</span><span class="p">,</span> <span class="n">get_restart_melvin</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_shutdown_melvin&quot;</span><span class="p">,</span> <span class="n">get_shutdown_melvin</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_post</span><span class="p">(</span><span class="s2">&quot;/api/post_execute_command&quot;</span><span class="p">,</span> <span class="n">post_execute_command</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_melvin_version&quot;</span><span class="p">,</span> <span class="n">get_melvin_version</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_list_log_files&quot;</span><span class="p">,</span> <span class="n">get_list_log_files</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_get</span><span class="p">(</span><span class="s2">&quot;/api/get_list_images&quot;</span><span class="p">,</span> <span class="n">get_list_images</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="melvonaut.ebt_calc" class="doc doc-heading">
            <code>ebt_calc</code>


<a href="#melvonaut.ebt_calc" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.events" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">events</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">load_events_from_csv</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.events" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>processed = []</p>
<h4 id="melvonaut.ebt_calc.events--data-4097-7652-2041-5758-8357-688-6220-8553-1075-7245-8989-1669">data = [(4097, 7652, 2041), (5758, 8357, 688), (6220, 8553, 1075), (7245, 8989, 1669)]<a class="headerlink" href="#melvonaut.ebt_calc.events--data-4097-7652-2041-5758-8357-688-6220-8553-1075-7245-8989-1669" title="Permanent link">&para;</a></h4>
<p>data = [
    (19972.3165561, 113.5243816, 1454.48),
    (20486.232864, 331.337984, 930.35),
    (20998.9861724, 548.6578144, 787.93),
    (21510.18207954, 766.74099024, 1093.99),
    (18882.99334624, 2295.73420544, 1947.67),
    (19394.53293776, 2512.96329856, 1450.01),
    (19908.73421827, 2730.89789112, 1442.63),
    (20421.30728271, 2948.14119576, 1828.68),
    (20926.46189231, 3163.05597336, 1651.83),
]
for d in data:
    s = ping(
        x=int(d[0] / scaling_factor),
        y=int(d[1] / scaling_factor),
        d=d[2] / scaling_factor,
        mind=int((d[2] - max_offset) / scaling_factor),
        maxd=int((d[2] + max_offset) / scaling_factor),
    )
    processed.append(s)
    print(f"Added: {s}")</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.id" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">id</span> <span class="o">=</span> <span class="mi">201</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.id" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.max_offset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">max_offset</span> <span class="o">=</span> <span class="mi">325</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.max_offset" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">path</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">CONSOLE_FROM_MELVONAUT_PATH</span> <span class="o">+</span> <span class="s1">&#39;MelvonautEvents.csv&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.path" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.processed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">processed</span> <span class="o">=</span> <span class="n">parse_pings</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.processed" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.res" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">res</span> <span class="o">=</span> <span class="n">find_matches</span><span class="p">(</span><span class="n">pings</span><span class="o">=</span><span class="n">processed</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.res" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.scaling_factor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.scaling_factor" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.x_0" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">x_0</span> <span class="o">=</span> <span class="mi">0</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.x_0" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.x_max" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">x_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.x_max" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.y_0" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">y_0</span> <span class="o">=</span> <span class="mi">0</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.y_0" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.ebt_calc.y_max" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">y_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.ebt_calc.y_max" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="melvonaut.ebt_calc.distance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">distance</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span></code>

<a href="#melvonaut.ebt_calc.distance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computes the Euclidean distance between two points, adjusting for wraparound conditions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>x1</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X-coordinate of the first point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>x2</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>X-coordinate of the second point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>y1</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Y-coordinate of the first point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>y2</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Y-coordinate of the second point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Euclidean distance between the two points.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/ebt_calc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">x1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">x2</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">y2</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the Euclidean distance between two points, adjusting for wraparound conditions.</span>

<span class="sd">    Args:</span>
<span class="sd">        x1 (int): X-coordinate of the first point.</span>
<span class="sd">        x2 (int): X-coordinate of the second point.</span>
<span class="sd">        y1 (int): Y-coordinate of the first point.</span>
<span class="sd">        y2 (int): Y-coordinate of the second point.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The Euclidean distance between the two points.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">x1</span> <span class="o">&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span><span class="p">:</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">%</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span>
    <span class="k">while</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x1</span> <span class="o">+=</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span>
    <span class="k">if</span> <span class="n">y1</span> <span class="o">&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span><span class="p">:</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">%</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span>
    <span class="k">while</span> <span class="n">y1</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">y1</span> <span class="o">+=</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span>
    <span class="k">if</span> <span class="n">x2</span> <span class="o">&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span><span class="p">:</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">%</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span>
    <span class="k">while</span> <span class="n">x2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x2</span> <span class="o">+=</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span>
    <span class="k">if</span> <span class="n">y2</span> <span class="o">&gt;</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span><span class="p">:</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">y2</span> <span class="o">%</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span>
    <span class="k">while</span> <span class="n">y2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">y2</span> <span class="o">+=</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span>

    <span class="c1"># check for case at edge</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span> <span class="o">+</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_X</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span> <span class="o">+</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">con</span><span class="o">.</span><span class="n">WORLD_Y</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.ebt_calc.draw_res" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">draw_res</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">pings</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#melvonaut.ebt_calc.draw_res" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Draws and saves a visualization of the computed emergency beacon locations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Identifier for the emergency beacon tracker.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>res</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of matched coordinate points.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pings</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Ping (shared.models.Ping)" href="../shared/#shared.models.Ping">Ping</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Ping objects representing detected signals.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>show</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to display the plot. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[int, int]: The estimated centroid of the matched points, or (-1, -1) if no matches were found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/ebt_calc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">draw_res</span><span class="p">(</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">res</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="n">pings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ping</span><span class="p">],</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Draws and saves a visualization of the computed emergency beacon locations.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (int): Identifier for the emergency beacon tracker.</span>
<span class="sd">        res (list[tuple[int, int]]): List of matched coordinate points.</span>
<span class="sd">        pings (list[Ping]): List of Ping objects representing detected signals.</span>
<span class="sd">        show (bool, optional): Whether to display the plot. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[int, int]: The estimated centroid of the matched points, or (-1, -1) if no matches were found.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">find_centroid</span><span class="p">(</span><span class="n">points</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the centroid of a set of points.</span>

<span class="sd">        Args:</span>
<span class="sd">            points (list[tuple[int, int]]): List of coordinate points.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float, float]: The centroid coordinates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">)</span>
        <span class="n">centroid_x</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
        <span class="n">centroid_y</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">centroid_x</span><span class="p">,</span> <span class="n">centroid_y</span><span class="p">)</span>

    <span class="n">x_list</span><span class="p">,</span> <span class="n">y_list</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">x_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">y_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">find_centroid</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;bmh&quot;</span><span class="p">)</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Emergency Beacon Tracker </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pings</span><span class="p">)</span><span class="si">}</span><span class="s2"> pings&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Width&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Height&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_max</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y_max</span><span class="p">)</span>

    <span class="c1"># plot matched area</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_list</span><span class="p">,</span> <span class="n">y_list</span><span class="p">,</span> <span class="s2">&quot;ro&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">legend_area</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Matched area&quot;</span>
    <span class="p">)</span>

    <span class="c1"># plot pings</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pings</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">circle_inner</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span>
            <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
            <span class="n">p</span><span class="o">.</span><span class="n">mind</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">circle_outer</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span>
            <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
            <span class="n">p</span><span class="o">.</span><span class="n">maxd</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span>
            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">circle_inner</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">circle_outer</span><span class="p">)</span>
    <span class="n">legend_point</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">(</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;None&quot;</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
        <span class="n">markerfacecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
        <span class="n">markeredgecolor</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span>
        <span class="n">markersize</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Ping Location&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">legend_inner</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum Distance&quot;</span>
    <span class="p">)</span>
    <span class="n">legend_outer</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Maximum Distance&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
        <span class="c1"># plot centroid</span>
        <span class="n">circle_guess</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span>
            <span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">centroid</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="mi">75</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;violet&quot;</span><span class="p">,</span>
            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;violet&quot;</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">circle_guess</span><span class="p">)</span>
        <span class="n">legend_guess</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;violet&quot;</span><span class="p">,</span>
            <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;violet&quot;</span><span class="p">,</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Best guess</span><span class="se">\n</span><span class="s2">(</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="n">handles</span><span class="o">=</span><span class="p">[</span>
                <span class="n">legend_point</span><span class="p">,</span>
                <span class="n">legend_inner</span><span class="p">,</span>
                <span class="n">legend_outer</span><span class="p">,</span>
                <span class="n">legend_guess</span><span class="p">,</span>
                <span class="n">legend_area</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;best&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span>
            <span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">legend_point</span><span class="p">,</span> <span class="n">legend_inner</span><span class="p">,</span> <span class="n">legend_outer</span><span class="p">,</span> <span class="n">legend_area</span><span class="p">],</span>
            <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;best&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Centroid is: (</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not match any points!&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">space</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">CONSOLE_EBT_PATH</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;EBT_</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pings</span><span class="p">)</span><span class="si">}</span><span class="s2">.png&quot;</span>
        <span class="k">while</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">space</span> <span class="o">=</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">CONSOLE_EBT_PATH</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;EBT_</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pings</span><span class="p">)</span><span class="si">}{</span><span class="n">space</span><span class="si">}</span><span class="s2">.png&quot;</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">centroid</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.ebt_calc.f" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code>

<a href="#melvonaut.ebt_calc.f" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Computes a transformed distance value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>d</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input distance value.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Transformed distance value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/ebt_calc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes a transformed distance value.</span>

<span class="sd">    Args:</span>
<span class="sd">        d (float): Input distance value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Transformed distance value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">225</span> <span class="o">+</span> <span class="p">((</span><span class="mf">0.4</span> <span class="o">*</span> <span class="p">(</span><span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.ebt_calc.find_matches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">find_matches</span><span class="p">(</span><span class="n">pings</span><span class="p">)</span></code>

<a href="#melvonaut.ebt_calc.find_matches" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Identifies matching points from the given pings based on distance constraints.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pings</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Ping (shared.models.Ping)" href="../shared/#shared.models.Ping">Ping</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Ping objects to process.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<span title="int">int</span>, <span title="int">int</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[tuple[int, int]]: List of coordinate pairs that satisfy all constraints.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/ebt_calc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">find_matches</span><span class="p">(</span><span class="n">pings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ping</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Identifies matching points from the given pings based on distance constraints.</span>

<span class="sd">    Args:</span>
<span class="sd">        pings (list[Ping]): List of Ping objects to process.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[tuple[int, int]]: List of coordinate pairs that satisfy all constraints.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Procssed first point</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">pings</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">maxd</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">p1</span><span class="o">.</span><span class="n">maxd</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">p1</span><span class="o">.</span><span class="n">maxd</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">p1</span><span class="o">.</span><span class="n">maxd</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">p1</span><span class="o">.</span><span class="n">maxd</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">x_0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">x_max</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">y_0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">y_max</span><span class="p">:</span>
                <span class="n">dist</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">dist</span> <span class="o">&gt;</span> <span class="n">p1</span><span class="o">.</span><span class="n">mind</span> <span class="ow">and</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">p1</span><span class="o">.</span><span class="n">maxd</span><span class="p">:</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="si">}</span><span class="s2"> possible points on first circle.&quot;</span><span class="p">)</span>

    <span class="c1"># Only keep the ones that are in all circles</span>
    <span class="n">filtered_res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">pn</span> <span class="ow">in</span> <span class="n">pings</span><span class="p">:</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dist</span> <span class="o">&lt;</span> <span class="n">pn</span><span class="o">.</span><span class="n">mind</span> <span class="ow">or</span> <span class="n">dist</span> <span class="o">&gt;</span> <span class="n">pn</span><span class="o">.</span><span class="n">maxd</span><span class="p">:</span>
                <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
            <span class="n">filtered_res</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered_res</span><span class="p">)</span><span class="si">}</span><span class="s2"> points that match all pings.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">filtered_res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.ebt_calc.parse_pings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse_pings</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">events</span><span class="p">)</span></code>

<a href="#melvonaut.ebt_calc.parse_pings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Parses event data to extract relevant ping information.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>id</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Identifier for the event source.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>events</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Event (shared.models.Event)" href="../shared/#shared.models.Event">Event</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of event objects to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Ping (shared.models.Ping)" href="../shared/#shared.models.Ping">Ping</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[Ping]: A list of parsed Ping objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/ebt_calc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parse_pings</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Event</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Ping</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses event data to extract relevant ping information.</span>

<span class="sd">    Args:</span>
<span class="sd">        id (int): Identifier for the event source.</span>
<span class="sd">        events (list[Event]): List of event objects to be processed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[Ping]: A list of parsed Ping objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">processed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="k">if</span> <span class="sa">f</span><span class="s2">&quot;GALILEO_MSG_EB,ID_</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">,DISTANCE_&quot;</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">event</span><span class="p">:</span>
            <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">easy_parse</span><span class="p">()</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Ping</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">),</span>
                <span class="n">y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">),</span>
                <span class="n">d</span><span class="o">=</span><span class="n">d</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">,</span>
                <span class="n">mind</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="n">d</span> <span class="o">-</span> <span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="p">))</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">),</span>
                <span class="n">maxd</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="n">d</span> <span class="o">+</span> <span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="p">))</span> <span class="o">/</span> <span class="n">scaling_factor</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">processed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">processed</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="melvonaut.mel_telemetry" class="doc doc-heading">
            <code>mel_telemetry</code>


<a href="#melvonaut.mel_telemetry" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="melvonaut.mel_telemetry.MelTelemetry" class="doc doc-heading">
            <code>MelTelemetry</code>


<a href="#melvonaut.mel_telemetry.MelTelemetry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseTelemetry (shared.models.BaseTelemetry)" href="../shared/#shared.models.BaseTelemetry">BaseTelemetry</a></code></p>








              <details class="quote">
                <summary>Source code in <code>src/melvonaut/mel_telemetry.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MelTelemetry</span><span class="p">(</span><span class="n">BaseTelemetry</span><span class="p">):</span>
    <span class="n">timestamp</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">store_observation_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores the telemetry observation data in a CSV file.</span>

<span class="sd">        This function converts the telemetry data into a flattened dictionary format,</span>
<span class="sd">        ensuring nested dictionaries are stored as separate fields. It then appends</span>
<span class="sd">        the data to an existing CSV file or creates a new file if one does not exist.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tel_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="n">flattened</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tel_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">sub_key</span><span class="p">,</span> <span class="n">sub_value</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">flattened</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">sub_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">flattened</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="n">flattened</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
                <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">afp</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">flattened</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
                <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">flattened</span><span class="p">)</span>
            <span class="c1"># logger.debug(f&quot;Writing observation to {con.TELEMETRY_LOCATION_CSV}&quot;)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
                <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">afp</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">flattened</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">flattened</span><span class="p">)</span>
            <span class="c1"># logger.debug(f&quot;Writing observation to {con.TELEMETRY_LOCATION_CSV}&quot;)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">store_observation_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stores the telemetry observation data in a JSON file.</span>

<span class="sd">        This function retrieves the existing telemetry data from the JSON file</span>
<span class="sd">        and updates it with a new entry. If the JSON file does not exist, a new</span>
<span class="sd">        one is created. The data is formatted in a structured manner with timestamps</span>
<span class="sd">        as keys.</span>

<span class="sd">        Args:</span>
<span class="sd">            None</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Storing observation as json.&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_JSON</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
                <span class="n">raw_telemetry</span> <span class="o">=</span> <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">dict_telemetry</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_telemetry</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_JSON</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
            <span class="n">dict_telemetry</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="n">new_telemetry_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">})</span>
        <span class="n">dict_telemetry</span><span class="p">[</span><span class="n">timestamp</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_telemetry_entry</span>
        <span class="n">json_telemetry</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dict_telemetry</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_JSON</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
            <span class="c1"># logger.debug(f&quot;Writing to {con.TELEMETRY_LOCATION_JSON}&quot;)</span>
            <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">json_telemetry</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Observation stored&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">model_post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__context__</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the telemetry model and triggers CSV storage.</span>

<span class="sd">        Args:</span>
<span class="sd">            __context__ (Any): Context data passed during initialization.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store_observation_csv</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.mel_telemetry.MelTelemetry.timestamp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">timestamp</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.mel_telemetry.MelTelemetry.timestamp" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="melvonaut.mel_telemetry.MelTelemetry.model_post_init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_post_init</span><span class="p">(</span><span class="n">__context__</span><span class="p">)</span></code>

<a href="#melvonaut.mel_telemetry.MelTelemetry.model_post_init" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initializes the telemetry model and triggers CSV storage.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>__context__</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context data passed during initialization.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/mel_telemetry.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">model_post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__context__</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the telemetry model and triggers CSV storage.</span>

<span class="sd">    Args:</span>
<span class="sd">        __context__ (Any): Context data passed during initialization.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store_observation_csv</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.mel_telemetry.MelTelemetry.store_observation_csv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">store_observation_csv</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.mel_telemetry.MelTelemetry.store_observation_csv" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Stores the telemetry observation data in a CSV file.</p>
<p>This function converts the telemetry data into a flattened dictionary format,
ensuring nested dictionaries are stored as separate fields. It then appends
the data to an existing CSV file or creates a new file if one does not exist.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/mel_telemetry.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">store_observation_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stores the telemetry observation data in a CSV file.</span>

<span class="sd">    This function converts the telemetry data into a flattened dictionary format,</span>
<span class="sd">    ensuring nested dictionaries are stored as separate fields. It then appends</span>
<span class="sd">    the data to an existing CSV file or creates a new file if one does not exist.</span>

<span class="sd">    Args:</span>
<span class="sd">        None</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tel_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
    <span class="n">flattened</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">tel_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">sub_key</span><span class="p">,</span> <span class="n">sub_value</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">flattened</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">sub_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub_value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">flattened</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="n">flattened</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">)</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">afp</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">flattened</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">flattened</span><span class="p">)</span>
        <span class="c1"># logger.debug(f&quot;Writing observation to {con.TELEMETRY_LOCATION_CSV}&quot;)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_CSV</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">afp</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">flattened</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="k">await</span> <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">flattened</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.mel_telemetry.MelTelemetry.store_observation_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">store_observation_json</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.mel_telemetry.MelTelemetry.store_observation_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Stores the telemetry observation data in a JSON file.</p>
<p>This function retrieves the existing telemetry data from the JSON file
and updates it with a new entry. If the JSON file does not exist, a new
one is created. The data is formatted in a structured manner with timestamps
as keys.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/mel_telemetry.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">store_observation_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stores the telemetry observation data in a JSON file.</span>

<span class="sd">    This function retrieves the existing telemetry data from the JSON file</span>
<span class="sd">    and updates it with a new entry. If the JSON file does not exist, a new</span>
<span class="sd">    one is created. The data is formatted in a structured manner with timestamps</span>
<span class="sd">    as keys.</span>

<span class="sd">    Args:</span>
<span class="sd">        None</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Storing observation as json.&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_JSON</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
            <span class="n">raw_telemetry</span> <span class="o">=</span> <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">dict_telemetry</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_telemetry</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_JSON</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>
        <span class="n">dict_telemetry</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="n">new_telemetry_entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">})</span>
    <span class="n">dict_telemetry</span><span class="p">[</span><span class="n">timestamp</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_telemetry_entry</span>
    <span class="n">json_telemetry</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dict_telemetry</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">TELEMETRY_LOCATION_JSON</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
        <span class="c1"># logger.debug(f&quot;Writing to {con.TELEMETRY_LOCATION_JSON}&quot;)</span>
        <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">json_telemetry</span><span class="p">))</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Observation stored&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="melvonaut.settings" class="doc doc-heading">
            <code>settings</code>


<a href="#melvonaut.settings" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.settings.file_log_handler_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_log_handler_id</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.settings.file_log_handler_id" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.settings.settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.settings.settings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-class">



<h3 id="melvonaut.settings.Settings" class="doc doc-heading">
            <code>Settings</code>


<a href="#melvonaut.settings.Settings" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Startup settings for Melvonaut, can be changed by Melvonaut API.</p>







              <details class="quote">
                <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Startup settings for Melvonaut, can be changed by Melvonaut API.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;arbitrary_types_allowed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="c1"># [Logging]</span>
    <span class="n">TRACING</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TRACING&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="n">TERMINAL_LOGGING_LEVEL</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TERMINAL_LOGGING_LEVEL&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="n">FILE_LOGGING_LEVEL</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;FILE_LOGGING_LEVEL&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="n">API_PORT</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;API_PORT&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
    <span class="n">DISCORD_WEBHOOK_TOKEN</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISCORD_WEBHOOK_TOKEN&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">DISCORD_ALERTS_ENABLED</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISCORD_ALERTS_ENABLED&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="n">NETWORK_SIM_ENABLED</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;NETWORK_SIMULATION&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="c1">## [Stateplaning]</span>
    <span class="n">OBSERVATION_REFRESH_RATE</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OBSERVATION_REFRESH_RATE&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># Seconds between observation requests</span>
    <span class="n">BATTERY_LOW_THRESHOLD</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;BATTERY_LOW_THRESHOLD&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
    <span class="n">BATTERY_HIGH_THRESHOLD</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;BATTERY_HIGH_THRESHOLD&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># Difference to Max Battery before switching</span>

    <span class="n">TARGET_ANGLE_DEG</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_ANGLE_DEG&quot;</span><span class="p">,</span> <span class="mf">23.0</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># The angle was calculated through simulations</span>
    <span class="c1"># With total speed over 50, cannot use wide angle camera</span>
    <span class="c1"># 49.9 = y + x</span>
    <span class="c1"># x = 2.35585 * y</span>
    <span class="c1"># 49.9 = 2.35585 * y + y</span>
    <span class="c1"># 49.9 = 3.35585 * y</span>
    <span class="c1"># y = 49.9 / 3.35585</span>
    <span class="c1"># y = 14.87</span>
    <span class="c1"># 49.9 - 14.87 = 35.03 = x</span>
    <span class="n">TARGET_SPEED_NORMAL_X</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_SPEED_NORMAL_X&quot;</span><span class="p">,</span> <span class="mf">35.03</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># 2.35585 times as much as Y</span>
    <span class="n">TARGET_SPEED_NORMAL_Y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_SPEED_NORMAL_Y&quot;</span><span class="p">,</span> <span class="mf">14.87</span><span class="p">))</span>

    <span class="c1"># With total speed over 10, cannot use narrow angle camera</span>
    <span class="c1"># 9.9 = y + x</span>
    <span class="c1"># y = 9.9 / 3.35585</span>
    <span class="c1"># y = 2.95</span>
    <span class="c1"># 9.9 - 2.95 = 6.95 = x</span>
    <span class="n">TARGET_SPEED_NARROW_X</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_SPEED_NARROW_X&quot;</span><span class="p">,</span> <span class="mf">6.95</span><span class="p">))</span>
    <span class="n">TARGET_SPEED_NARROW_Y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_SPEED_NARROW_Y&quot;</span><span class="p">,</span> <span class="mf">2.95</span><span class="p">))</span>

    <span class="c1"># Total speed can be up to 71</span>
    <span class="c1"># 71 = y + x</span>
    <span class="c1"># y = 71 / 3.35585</span>
    <span class="c1"># y = 21.16</span>
    <span class="c1"># 71 - 21.16 = 49.84 = x</span>
    <span class="n">TARGET_SPEED_WIDE_X</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_SPEED_WIDE_X&quot;</span><span class="p">,</span> <span class="mf">49.84</span><span class="p">))</span>
    <span class="n">TARGET_SPEED_WIDE_Y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;TARGET_SPEED_WIDE_Y&quot;</span><span class="p">,</span> <span class="mf">21.16</span><span class="p">))</span>

    <span class="n">DISTANCE_BETWEEN_IMAGES</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DISTANCE_BETWEEN_IMAGES&quot;</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
    <span class="p">)</span>  <span class="c1"># How many pixel before taking another image</span>

    <span class="c1"># [Melvin Task Planing]</span>
    <span class="c1"># Standard mapping, with no objectives and the camera angle below</span>
    <span class="n">CURRENT_MELVIN_TASK</span><span class="p">:</span> <span class="n">MELVINTask</span> <span class="o">=</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Mapping</span>
    <span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">:</span> <span class="n">CameraAngle</span> <span class="o">=</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Narrow</span>

    <span class="c1"># Automatically do the next upcoming objective</span>
    <span class="c1"># CURRENT_MELVIN_TASK: MELVINTasks = MELVINTasks.Next_objective</span>

    <span class="c1"># Do a specific objective</span>
    <span class="c1"># CURRENT_MELVIN_TASK: MELVINTasks = MELVINTasks.Fixed_objective</span>
    <span class="c1"># FIXED_OBJECTIVE = &quot;Aurora 10&quot;</span>

    <span class="c1"># Go for the emergency beacon tracker</span>
    <span class="c1"># CURRENT_MELVIN_TASK: MELVINTask = MELVINTask.EBT</span>

    <span class="c1"># [Legacy]</span>
    <span class="c1"># To set a custom time window to be active, or to disable all timing checks</span>
    <span class="n">DO_TIMING_CHECK</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">START_TIME</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span>
        <span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
    <span class="p">)</span>
    <span class="n">STOP_TIME</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span>
        <span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">00</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
    <span class="p">)</span>
    <span class="n">DO_ACTUALLY_EXIT</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Used in testing</span>
    <span class="n">OVERRIDES</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># load settings</span>
    <span class="k">def</span> <span class="nf">load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads settings from a persistent JSON file.</span>

<span class="sd">        If the settings file does not exist or contains invalid JSON,</span>
<span class="sd">        the overrides dictionary is reset to an empty state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Settings don&#39;t exist&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">loaded</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
            <span class="k">except</span> <span class="n">JSONDecodeError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to load settings&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">return</span>
            <span class="c1"># logger.debug(f&quot;{loaded=}&quot;)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">loaded</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>

    <span class="c1"># save settings</span>
    <span class="k">def</span> <span class="nf">save_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves the current settings overrides to a persistent JSON file.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">))</span>

    <span class="c1"># get settings</span>
    <span class="k">def</span> <span class="nf">get_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves a setting value from overrides or returns the default.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The setting key to retrieve.</span>
<span class="sd">            default (Any, optional): The default value if the key is not found. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The value of the setting if it exists, otherwise the default.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">default</span><span class="p">)</span>

    <span class="c1"># set setting</span>
    <span class="k">def</span> <span class="nf">set_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets a single setting in overrides and saves the settings.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The setting key.</span>
<span class="sd">            value (Any): The value to assign to the setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># logger.debug(f&quot;Setting {key.upper()} to {value}&quot;)</span>
        <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">set_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_values</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets multiple settings at once and saves them.</span>

<span class="sd">        Args:</span>
<span class="sd">            key_values (dict[str, Any]): A dictionary of key-value pairs to update.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># logger.debug(f&quot;Setting {self.OVERRIDES}&quot;)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing settings&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="s2">&quot;OVERRIDES&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">key_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="c1"># logger.debug(f&quot;Setting {self.OVERRIDES}&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes specified settings from overrides and saves the settings.</span>

<span class="sd">        Args:</span>
<span class="sd">            keys (list[str]): A list of setting keys to remove.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># logger.debug(f&quot;Deleting {keys}&quot;)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>
        <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">init_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes settings by checking for an existing settings file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if settings were newly created, False if they already exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Settings already exist&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Settings created&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># clear settings</span>
    <span class="k">def</span> <span class="nf">clear_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears all settings by setting overrides to None and saving.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
        <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>

    <span class="k">def</span> <span class="nf">get_default_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves the default value of a setting from the class attributes.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The setting key to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The default value of the setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes the Settings object, loading settings if they exist.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_settings</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_settings</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overrides attribute access to check overrides before default settings.</span>

<span class="sd">        Args:</span>
<span class="sd">            item (str): The attribute key to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The overridden value if it exists, otherwise the default.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="c1"># logger.debug(f&quot;Getting {item}&quot;)</span>
        <span class="n">overrides</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="s2">&quot;OVERRIDES&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">overrides</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">overrides</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overrides attribute setting to ensure settings are properly stored.</span>

<span class="sd">        Args:</span>
<span class="sd">            key (str): The setting key.</span>
<span class="sd">            value (Any): The value to assign to the setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># logger.debug(f&quot;Setting {key} to {value}&quot;)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;OVERRIDES&quot;</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_settings</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.API_PORT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">API_PORT</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;API_PORT&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.API_PORT" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.BATTERY_HIGH_THRESHOLD" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BATTERY_HIGH_THRESHOLD</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;BATTERY_HIGH_THRESHOLD&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.BATTERY_HIGH_THRESHOLD" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.BATTERY_LOW_THRESHOLD" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">BATTERY_LOW_THRESHOLD</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;BATTERY_LOW_THRESHOLD&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.BATTERY_LOW_THRESHOLD" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.CURRENT_MELVIN_TASK" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">=</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Mapping</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.CURRENT_MELVIN_TASK" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.DISCORD_ALERTS_ENABLED" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">DISCORD_ALERTS_ENABLED</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;DISCORD_ALERTS_ENABLED&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.DISCORD_ALERTS_ENABLED" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.DISCORD_WEBHOOK_TOKEN" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">DISCORD_WEBHOOK_TOKEN</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;DISCORD_WEBHOOK_TOKEN&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.DISCORD_WEBHOOK_TOKEN" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.DISTANCE_BETWEEN_IMAGES" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">DISTANCE_BETWEEN_IMAGES</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;DISTANCE_BETWEEN_IMAGES&#39;</span><span class="p">,</span> <span class="mi">450</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.DISTANCE_BETWEEN_IMAGES" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.DO_ACTUALLY_EXIT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">DO_ACTUALLY_EXIT</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.DO_ACTUALLY_EXIT" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.DO_TIMING_CHECK" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">DO_TIMING_CHECK</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.DO_TIMING_CHECK" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.FILE_LOGGING_LEVEL" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">FILE_LOGGING_LEVEL</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;FILE_LOGGING_LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;INFO&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.FILE_LOGGING_LEVEL" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.NETWORK_SIM_ENABLED" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">NETWORK_SIM_ENABLED</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;NETWORK_SIMULATION&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.NETWORK_SIM_ENABLED" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.OBSERVATION_REFRESH_RATE" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">OBSERVATION_REFRESH_RATE</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;OBSERVATION_REFRESH_RATE&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.OBSERVATION_REFRESH_RATE" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.OVERRIDES" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="p">{}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.OVERRIDES" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.START_TIME" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">START_TIME</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.START_TIME" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.STOP_TIME" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">STOP_TIME</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.STOP_TIME" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_ANGLE_DEG" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_ANGLE_DEG</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_ANGLE_DEG&#39;</span><span class="p">,</span> <span class="mf">23.0</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_ANGLE_DEG" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_CAMERA_ANGLE_ACQUISITION" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span> <span class="o">=</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Narrow</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_CAMERA_ANGLE_ACQUISITION" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_SPEED_NARROW_X" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_SPEED_NARROW_X</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_SPEED_NARROW_X&#39;</span><span class="p">,</span> <span class="mf">6.95</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_SPEED_NARROW_X" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_SPEED_NARROW_Y" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_SPEED_NARROW_Y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_SPEED_NARROW_Y&#39;</span><span class="p">,</span> <span class="mf">2.95</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_SPEED_NARROW_Y" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_SPEED_NORMAL_X" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_SPEED_NORMAL_X</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_SPEED_NORMAL_X&#39;</span><span class="p">,</span> <span class="mf">35.03</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_SPEED_NORMAL_X" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_SPEED_NORMAL_Y" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_SPEED_NORMAL_Y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_SPEED_NORMAL_Y&#39;</span><span class="p">,</span> <span class="mf">14.87</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_SPEED_NORMAL_Y" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_SPEED_WIDE_X" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_SPEED_WIDE_X</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_SPEED_WIDE_X&#39;</span><span class="p">,</span> <span class="mf">49.84</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_SPEED_WIDE_X" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TARGET_SPEED_WIDE_Y" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TARGET_SPEED_WIDE_Y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TARGET_SPEED_WIDE_Y&#39;</span><span class="p">,</span> <span class="mf">21.16</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TARGET_SPEED_WIDE_Y" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TERMINAL_LOGGING_LEVEL" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TERMINAL_LOGGING_LEVEL</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TERMINAL_LOGGING_LEVEL&#39;</span><span class="p">,</span> <span class="s1">&#39;INFO&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TERMINAL_LOGGING_LEVEL" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.TRACING" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">TRACING</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;TRACING&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.TRACING" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.settings.Settings.model_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;arbitrary_types_allowed&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.settings.Settings.model_config" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.__getattribute__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.__getattribute__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Overrides attribute access to check overrides before default settings.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>item</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The attribute key to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The overridden value if it exists, otherwise the default.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Overrides attribute access to check overrides before default settings.</span>

<span class="sd">    Args:</span>
<span class="sd">        item (str): The attribute key to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The overridden value if it exists, otherwise the default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="c1"># logger.debug(f&quot;Getting {item}&quot;)</span>
    <span class="n">overrides</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="s2">&quot;OVERRIDES&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="n">overrides</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">overrides</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span></code>

<a href="#melvonaut.settings.Settings.__init__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initializes the Settings object, loading settings if they exist.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the Settings object, loading settings if they exist.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_settings</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_settings</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.__setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.__setattr__" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Overrides attribute setting to ensure settings are properly stored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The setting key.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to assign to the setting.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Overrides attribute setting to ensure settings are properly stored.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The setting key.</span>
<span class="sd">        value (Any): The value to assign to the setting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># logger.debug(f&quot;Setting {key} to {value}&quot;)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;OVERRIDES&quot;</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_settings</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.clear_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_settings</span><span class="p">()</span></code>

<a href="#melvonaut.settings.Settings.clear_settings" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Clears all settings by setting overrides to None and saving.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">clear_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clears all settings by setting overrides to None and saving.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.delete_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_settings</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.delete_settings" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Deletes specified settings from overrides and saves the settings.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>keys</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of setting keys to remove.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">delete_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes specified settings from overrides and saves the settings.</span>

<span class="sd">    Args:</span>
<span class="sd">        keys (list[str]): A list of setting keys to remove.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># logger.debug(f&quot;Deleting {keys}&quot;)</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span>
    <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.get_default_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_default_setting</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.get_default_setting" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves the default value of a setting from the class attributes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The setting key to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default value of the setting.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_default_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves the default value of a setting from the class attributes.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The setting key to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The default value of the setting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.get_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_setting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.get_setting" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves a setting value from overrides or returns the default.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The setting key to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>default</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The default value if the key is not found. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Any</code></td>            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value of the setting if it exists, otherwise the default.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves a setting value from overrides or returns the default.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The setting key to retrieve.</span>
<span class="sd">        default (Any, optional): The default value if the key is not found. Defaults to None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Any: The value of the setting if it exists, otherwise the default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="n">default</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.init_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_settings</span><span class="p">()</span></code>

<a href="#melvonaut.settings.Settings.init_settings" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initializes settings by checking for an existing settings file.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if settings were newly created, False if they already exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">init_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes settings by checking for an existing settings file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if settings were newly created, False if they already exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Settings already exist&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Settings created&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.load_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_settings</span><span class="p">()</span></code>

<a href="#melvonaut.settings.Settings.load_settings" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Loads settings from a persistent JSON file.</p>
<p>If the settings file does not exist or contains invalid JSON,
the overrides dictionary is reset to an empty state.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads settings from a persistent JSON file.</span>

<span class="sd">    If the settings file does not exist or contains invalid JSON,</span>
<span class="sd">    the overrides dictionary is reset to an empty state.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Settings don&#39;t exist&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">loaded</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span> <span class="n">JSONDecodeError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Failed to load settings&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">return</span>
        <span class="c1"># logger.debug(f&quot;{loaded=}&quot;)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">loaded</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.save_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_settings</span><span class="p">()</span></code>

<a href="#melvonaut.settings.Settings.save_settings" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Saves the current settings overrides to a persistent JSON file.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves the current settings overrides to a persistent JSON file.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_PERSISTENT_SETTINGS</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.set_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_setting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.set_setting" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sets a single setting in overrides and saves the settings.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The setting key.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to assign to the setting.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets a single setting in overrides and saves the settings.</span>

<span class="sd">    Args:</span>
<span class="sd">        key (str): The setting key.</span>
<span class="sd">        value (Any): The value to assign to the setting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># logger.debug(f&quot;Setting {key.upper()} to {value}&quot;)</span>
    <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">OVERRIDES</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="c1"># logger.debug(f&quot;{self.OVERRIDES=}&quot;)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.settings.Settings.set_settings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_settings</span><span class="p">(</span><span class="n">key_values</span><span class="p">)</span></code>

<a href="#melvonaut.settings.Settings.set_settings" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sets multiple settings at once and saves them.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>key_values</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of key-value pairs to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/settings.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_values</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets multiple settings at once and saves them.</span>

<span class="sd">    Args:</span>
<span class="sd">        key_values (dict[str, Any]): A dictionary of key-value pairs to update.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># logger.debug(f&quot;Setting {self.OVERRIDES}&quot;)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">key_values</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Clearing settings&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="s2">&quot;OVERRIDES&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">key_values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="c1"># logger.debug(f&quot;Setting {self.OVERRIDES}&quot;)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_settings</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="melvonaut.state_planer" class="doc doc-heading">
            <code>state_planer</code>


<a href="#melvonaut.state_planer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.state_planer.state_planner" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">state_planner</span> <span class="o">=</span> <span class="n">StatePlanner</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.state_planner" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>


<div class="doc doc-object doc-class">



<h3 id="melvonaut.state_planer.StatePlanner" class="doc doc-heading">
            <code>StatePlanner</code>


<a href="#melvonaut.state_planer.StatePlanner" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">StatePlanner</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">melv_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9999</span><span class="p">)</span>
    <span class="n">current_telemetry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MelTelemetry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">previous_telemetry</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MelTelemetry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">previous_state</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">State</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">state_change_time</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

    <span class="n">submitted_transition_request</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">target_state</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">State</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_accelerating</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">_run_get_image_task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_aiohttp_session</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_target_vel_x</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_target_vel_y</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">_z_obj_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ZonedObjective</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">recent_events</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Event</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">_current_obj_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">model_post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__context__</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes the recent_events list by loading events from a CSV file.</span>

<span class="sd">        Args:</span>
<span class="sd">            __context__ (Any): Context data passed during initialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recent_events</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">load_events_from_csv</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">EVENT_LOCATION_CSV</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_current_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves the current state from telemetry data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            State: The current state if telemetry is available, otherwise State.Unknown.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">state</span>

    <span class="k">def</span> <span class="nf">get_previous_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves the previous state from telemetry data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            State: The previous state if telemetry is available, otherwise State.Unknown.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span><span class="o">.</span><span class="n">state</span>

    <span class="k">def</span> <span class="nf">get_simulation_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the current simulation speed from telemetry data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The simulation speed if telemetry is available, otherwise 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">simulation_speed</span>

    <span class="k">def</span> <span class="nf">get_time_since_state_change</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculates the time elapsed since the last state change.</span>

<span class="sd">        Returns:</span>
<span class="sd">            datetime.timedelta: The time difference between now and the last state change.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_change_time</span>

    <span class="k">def</span> <span class="nf">calc_transition_remaining_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculates the remaining time for state transition.</span>

<span class="sd">        Returns:</span>
<span class="sd">            datetime.timedelta: The remaining transition time based on the simulation speed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="ow">is</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Not in transition state, returning 0&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">:</span>
            <span class="n">total_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                <span class="n">seconds</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">STATE_TRANSITION_FROM_SAFE_TIME</span>
                <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">total_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_since_state_change</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">total_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
                <span class="n">seconds</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">STATE_TRANSITION_TIME</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">total_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_since_state_change</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">calc_current_location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Estimates the current location based on telemetry data and time elapsed.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float, float]: The estimated (x, y) coordinates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
        <span class="n">time_since_observation</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">live_utc</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">current_x</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">width_x</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span> <span class="o">*</span> <span class="n">time_since_observation</span>
        <span class="p">)</span>
        <span class="n">current_y</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">height_y</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span> <span class="o">*</span> <span class="n">time_since_observation</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">current_x</span><span class="p">,</span> <span class="n">current_y</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_velocity_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_vel_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">new_vel_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets new values for accelartion, also set _accelerating</span>

<span class="sd">        Args:</span>
<span class="sd">            new_vel_x (float): The target velocity in the x direction.</span>
<span class="sd">            new_vel_y (float): The target velocity in the y direction.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">=</span> <span class="n">new_vel_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">=</span> <span class="n">new_vel_y</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot set velocity.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">new_vel_x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
            <span class="ow">and</span> <span class="n">new_vel_y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Target velocity already set. Not changing velocity.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;vel_x&quot;</span><span class="p">:</span> <span class="n">new_vel_x</span><span class="p">,</span>
            <span class="s2">&quot;vel_y&quot;</span><span class="p">:</span> <span class="n">new_vel_y</span><span class="p">,</span>
            <span class="s2">&quot;camera_angle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">,</span>
            <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">CONTROL_ENDPOINT</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">request_body</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Velocity set to </span><span class="si">{</span><span class="n">new_vel_x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">new_vel_y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to set velocity to </span><span class="si">{</span><span class="n">new_vel_x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">new_vel_y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_camera_angle_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_angle</span><span class="p">:</span> <span class="n">CameraAngle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tries to change the camera angle to new_angle</span>

<span class="sd">        Args:</span>
<span class="sd">            new_angle (CameraAngle): The desired camera angle.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot set camera angle.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">new_angle</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Target camera angle already set. Not changing angle.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;vel_x&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="p">,</span>
            <span class="s2">&quot;vel_y&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="p">,</span>
            <span class="s2">&quot;camera_angle&quot;</span><span class="p">:</span> <span class="n">new_angle</span><span class="p">,</span>
            <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">CONTROL_ENDPOINT</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">request_body</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="n">new_angle</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Camera angle set to </span><span class="si">{</span><span class="n">new_angle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to set camera angle to </span><span class="si">{</span><span class="n">new_angle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_state_transition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initiates a state transition if valid conditions are met.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_state (State): The target state to transition to.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">new_state</span> <span class="ow">in</span> <span class="p">[</span><span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Deployment</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">]:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot transition to </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot initiate transition.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Already in transition state, not starting transition.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">new_state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;State is already </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2">, not starting transition.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="n">new_state</span><span class="p">,</span>
            <span class="s2">&quot;vel_x&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="p">,</span>
            <span class="s2">&quot;vel_y&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="p">,</span>
            <span class="s2">&quot;camera_angle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">CONTROL_ENDPOINT</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">request_body</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Started transition to </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2"> at battery level </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">submitted_transition_request</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">target_state</span> <span class="o">=</span> <span class="n">new_state</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed to transition to </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response body: </span><span class="si">{</span><span class="k">await</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">switch_if_battery_low</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">state_low_battery</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span> <span class="n">state_high_battery</span><span class="p">:</span> <span class="n">State</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Switches state based on battery level.</span>

<span class="sd">        Args:</span>
<span class="sd">            state_low_battery (State): The state to switch to when battery is low.</span>
<span class="sd">            state_high_battery (State): The state to switch to when battery is sufficient.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;No telemetry data available. Cannot plan battery based switching.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span> <span class="o">&lt;=</span> <span class="n">settings</span><span class="o">.</span><span class="n">BATTERY_LOW_THRESHOLD</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">state_low_battery</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;State is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">, Battery is low, triggering transition to </span><span class="si">{</span><span class="n">state_low_battery</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">state_low_battery</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">state_high_battery</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;State is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">, Battery is high, triggering transition to </span><span class="si">{</span><span class="n">state_high_battery</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">state_high_battery</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">plan_state_switching</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Plans and executes state transitions based on current telemetry data.</span>

<span class="sd">        This function checks the current state and decides whether to transition</span>
<span class="sd">        to another state based on conditions like battery level and velocity.</span>

<span class="sd">        Logs relevant debug information and triggers state transitions when necessary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot plan state switching.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>

        <span class="k">match</span> <span class="n">state</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Time since state change: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_time_since_state_change</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">expected_time_to_complete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_transition_remaining_time</span><span class="p">()</span>
                <span class="n">limited_log</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;State is Transition to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_state</span><span class="si">}</span><span class="s2">, waiting for transition to complete.</span><span class="se">\n</span><span class="s2">Expected time to complete state transition: </span><span class="si">{</span><span class="n">expected_time_to_complete</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="c1"># logger.debug(</span>
                <span class="c1">#     f&quot;Previous state: {self.get_previous_state()}, Current state: {self.get_current_state()}&quot;</span>
                <span class="c1"># )</span>
            <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
                <span class="c1"># in EBT leave once everything is set</span>
                <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">EBT</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span>
                        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span>
                        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span>
                        <span class="o">==</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span>
                        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
                        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
                    <span class="p">):</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">)</span>

                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>

            <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span>
                    <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">max_battery</span>
                    <span class="o">-</span> <span class="n">settings</span><span class="o">.</span><span class="n">BATTERY_HIGH_THRESHOLD</span>
                <span class="p">):</span>
                    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">EBT</span><span class="p">:</span>
                        <span class="c1"># starting ebt, but speed/angle not set yet</span>

                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;EBT Task, Angle: telemetry: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2"> vs target: </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;EBT Task, vx: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="si">}</span><span class="s2"> vs target: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;EBT Task, vy: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="si">}</span><span class="s2"> vs target: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="ow">is</span> <span class="kc">None</span>
                            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="ow">is</span> <span class="kc">None</span>
                            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span>
                            <span class="o">!=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span>
                            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
                            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
                        <span class="p">):</span>
                            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># logger.info(&quot;starting comms!&quot;)</span>
                            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># logger.info(&quot;starting acq!&quot;)</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>

            <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span> <span class="o">&gt;=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">max_battery</span> <span class="o">*</span> <span class="mf">0.5</span>
                <span class="p">):</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">)</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
            <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">)</span>
            <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Deployment</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;State is Deployment, triggering transition to Acquisition&quot;</span>
                <span class="p">)</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">update_telemetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_telemetry</span><span class="p">:</span> <span class="n">MelTelemetry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the telemetry data and handles state changes.</span>

<span class="sd">        This function updates the previous and current telemetry readings,</span>
<span class="sd">        logs relevant debug information, and checks for state changes.</span>

<span class="sd">        If a state change occurs, it logs the transition, cancels image</span>
<span class="sd">        retrieval tasks if necessary, and triggers appropriate actions based on</span>
<span class="sd">        the new state.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_telemetry (MelTelemetry): The new telemetry data to update.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="o">=</span> <span class="n">new_telemetry</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;New observations - State: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; Battery level: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">max_battery</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; Vel X,Y: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; Fuel: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">fuel</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Current memory usage: &quot;</span>
            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">())</span><span class="o">.</span><span class="n">memory_info</span><span class="p">()</span><span class="o">.</span><span class="n">rss</span> <span class="o">/</span> <span class="mi">1024</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot; MB&quot;</span>
        <span class="p">)</span>

        <span class="c1"># if self.get_current_state() == State.Acquisition:</span>
        <span class="c1">#    await self.get_image()</span>
        <span class="c1"># logger.debug(f&quot;Threads: {threading.active_count()}&quot;)</span>
        <span class="c1"># for thread in threading.enumerate():</span>
        <span class="c1">#    frame = sys._current_frames()[thread.ident]</span>
        <span class="c1">#    logger.warning(f&quot;{inspect.getframeinfo(frame).filename}.{inspect.getframeinfo(frame).function}:{inspect.getframeinfo(frame).lineno}&quot;)</span>

        <span class="c1"># check if still accelerating</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_previous_state</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;State changed from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_previous_state</span><span class="p">()</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">previous_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_previous_state</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state_change_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                <span class="c1"># Put in here events to do on state change</span>
                <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">TRACING</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                        <span class="n">snapshot1</span> <span class="o">=</span> <span class="n">tracemalloc</span><span class="o">.</span><span class="n">take_snapshot</span><span class="p">()</span>
                        <span class="n">stats</span> <span class="o">=</span> <span class="n">snapshot1</span><span class="o">.</span><span class="n">statistics</span><span class="p">(</span><span class="s2">&quot;traceback&quot;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">stat</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> memory blocks: </span><span class="si">%.1f</span><span class="s2"> KiB&quot;</span>
                                <span class="o">%</span> <span class="p">(</span><span class="n">stat</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">stat</span><span class="o">.</span><span class="n">size</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span>
                            <span class="p">)</span>
                            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stat</span><span class="o">.</span><span class="n">traceback</span><span class="o">.</span><span class="n">format</span><span class="p">():</span>
                                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

                <span class="c1"># logger.debug(</span>
                <span class="c1">#     f&quot;Previous state: {self.previous_state}, Current state: {self.get_current_state()}&quot;</span>
                <span class="c1"># )</span>
                <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
                    <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end image&quot;</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">submitted_transition_request</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">submitted_transition_request</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;State transition was externally triggered!&quot;</span><span class="p">)</span>
                    <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting control in acquisition state.&quot;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Image task already running&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start image&quot;</span><span class="p">)</span>
                            <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">run_get_image</span><span class="p">()</span>
                            <span class="p">)</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">control_acquisition</span><span class="p">()</span>
                    <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;State transitioned to SAFE!&quot;</span><span class="p">)</span>
                    <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Deployment</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;State transitioned to DEPLOYMENT!&quot;</span><span class="p">)</span>
                    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown state </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">!=</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">!=</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_state</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Planned state transition to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_state</span><span class="si">}</span><span class="s2"> failed, now in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Planned state transition to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_state</span><span class="si">}</span><span class="s2"> succeeded.&quot;</span>
                        <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">target_state</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan_state_switching</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Captures an image if telemetry data is available and conditions are met.</span>

<span class="sd">        If no telemetry data is available, the function waits for the next observation cycle.</span>
<span class="sd">        It checks various conditions (e.g., acceleration, camera angle, timing) before fetching an image</span>
<span class="sd">        from an external API and saving it with appropriate metadata.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting image&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;No telemetry data available. Waiting </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span><span class="si">}</span><span class="s2">s for next image.&quot;</span>
            <span class="p">)</span>
            <span class="n">image_task</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_image</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_task</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">image_task</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aiohttp_session</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_aiohttp_session</span> <span class="o">=</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span>

        <span class="c1"># Filter out cases where no image should be taken</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Fixed_objective</span>
            <span class="ow">or</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Next_objective</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Skipped image: In Objectives_only mode, but z_obj_list emtpy!&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span> <span class="o">!=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Skipped image: current_angle=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2"> vs target=</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Skipped image: accelerating to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DO_TIMING_CHECK</span> <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">START_TIME</span> <span class="o">&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
            <span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
        <span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Skipped image, to early: start=</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">START_TIME</span><span class="si">}</span><span class="s2"> current_time=</span><span class="si">{</span><span class="n">live_utc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DO_TIMING_CHECK</span> <span class="ow">and</span> <span class="n">live_utc</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">settings</span><span class="o">.</span><span class="n">STOP_TIME</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Skipped image, to late: end=</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">STOP_TIME</span><span class="si">}</span><span class="s2"> current_time=</span><span class="si">{</span><span class="n">live_utc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># save the current telemetry values, so they dont get overwritten by a later update</span>
        <span class="n">tele_timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">timestamp</span>
        <span class="n">tele_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">width_x</span>
        <span class="n">tele_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">height_y</span>
        <span class="n">tele_vx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
        <span class="n">tele_vy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
        <span class="n">tele_simSpeed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
        <span class="n">tele_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span>

        <span class="n">lens_size</span> <span class="o">=</span> <span class="n">lens_size_by_angle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">)</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        # TODO add box check if melvin and objective overlap</span>
<span class="sd">        # check if we are in range of an objective</span>
<span class="sd">        # TODO also check MELVINTasks</span>
<span class="sd">        # TODO check if within box, unless hidden</span>
<span class="sd">        melvin_box = (</span>
<span class="sd">            tele_x - lens_size / 2,</span>
<span class="sd">            tele_y - lens_size / 2,</span>
<span class="sd">            tele_x + lens_size / 2,</span>
<span class="sd">            tele_y + lens_size / 2,</span>
<span class="sd">        )</span>
<span class="sd">        if self._z_obj_list[0].zone is None:</span>
<span class="sd">            logger.warning(&quot;Hidden objective, taking photo&quot;)</span>
<span class="sd">            return</span>
<span class="sd">            TODO</span>
<span class="sd">        else:</span>
<span class="sd">            logger.warning(&quot;Checking if in range of objective:&quot;)</span>
<span class="sd">            objective_box = self._z_obj_list[0].zone</span>

<span class="sd">        if not boxes_overlap_in_grid(melvin_box, objective_box):</span>
<span class="sd">            logger.error(</span>
<span class="sd">                f&quot;Image skipped, not Overlapping! {melvin_box} {objective_box}&quot;</span>
<span class="sd">            )</span>
<span class="sd">            return</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_ENDPOINT</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                        <span class="c1"># Extract exact image timestamp</span>
                        <span class="n">img_timestamp</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;image-timestamp&quot;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">img_timestamp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                                <span class="s2">&quot;Image timestamp not found in headers, substituting with current time&quot;</span>
                            <span class="p">)</span>
                            <span class="n">parsed_img_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">parsed_img_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span>
                                <span class="n">img_timestamp</span>
                            <span class="p">)</span>

                        <span class="c1"># Calculate the difference between the img and the last telemetry</span>
                        <span class="n">difference_in_seconds</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">parsed_img_timestamp</span> <span class="o">-</span> <span class="n">tele_timestamp</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

                        <span class="n">adj_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span>
                            <span class="n">tele_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">difference_in_seconds</span> <span class="o">*</span> <span class="n">tele_vx</span> <span class="o">*</span> <span class="n">tele_simSpeed</span><span class="p">)</span>
                        <span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">lens_size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                        <span class="n">adj_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span>
                            <span class="n">tele_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">difference_in_seconds</span> <span class="o">*</span> <span class="n">tele_vy</span> <span class="o">*</span> <span class="n">tele_simSpeed</span><span class="p">)</span>
                        <span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">lens_size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

                        <span class="c1"># TODO check if images are correct!</span>
                        <span class="c1"># TODO might also need modulo for side cases</span>
                        <span class="c1"># logger.debug(f&quot;T {parsed_img_timestamp} | C {tele_timestamp}&quot;)</span>
                        <span class="c1"># logger.debug(</span>
                        <span class="c1">#     f&quot;D {difference_in_seconds} | R {tele_x} ADJ {adj_x}&quot;</span>
                        <span class="c1"># )</span>

                        <span class="n">image_path</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_LOCATION</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">melv_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_obj_name</span><span class="p">,</span>
                            <span class="n">angle</span><span class="o">=</span><span class="n">tele_angle</span><span class="p">,</span>
                            <span class="n">time</span><span class="o">=</span><span class="n">parsed_img_timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">),</span>
                            <span class="n">cor_x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">adj_x</span><span class="p">),</span>
                            <span class="n">cor_y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">adj_y</span><span class="p">),</span>
                        <span class="p">)</span>

                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Received image at </span><span class="si">{</span><span class="n">adj_x</span><span class="si">}</span><span class="s2">x </span><span class="si">{</span><span class="n">adj_y</span><span class="si">}</span><span class="s2">y with </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2"> angle&quot;</span>
                        <span class="p">)</span>

                        <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
                            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                                <span class="n">cnt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">readany</span><span class="p">()</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">cnt</span><span class="p">:</span>
                                    <span class="k">break</span>
                                <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cnt</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get image: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response body: </span><span class="si">{</span><span class="k">await</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                            <span class="s2">&quot;This is normal at the end of acquisition mode once.&quot;</span>
                        <span class="p">)</span>
            <span class="k">except</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">client_exceptions</span><span class="o">.</span><span class="n">ConnectionTimeoutError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Observations endpoint timeouted.&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Get image task was cancelled.&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">run_get_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Continuously captures images while in the Acquisition state.</span>

<span class="sd">        This function continuously captures images at calculated intervals,</span>
<span class="sd">        adjusting timing based on velocity and acceleration.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting run_get_image&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;No telemetry data available. Assuming Observation Refresh Rate.&quot;</span>
                <span class="p">)</span>
                <span class="n">delay_in_s</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_total_vel</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span><span class="p">:</span>
                    <span class="c1"># If accelerating calculate distance based on current speed and acceleration</span>
                    <span class="n">delay_in_s</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
                            <span class="n">current_total_vel</span><span class="o">**</span><span class="mi">2</span>
                            <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">con</span><span class="o">.</span><span class="n">ACCELERATION</span> <span class="o">*</span> <span class="n">settings</span><span class="o">.</span><span class="n">DISTANCE_BETWEEN_IMAGES</span>
                        <span class="p">)</span>
                        <span class="o">-</span> <span class="n">current_total_vel</span>
                    <span class="p">)</span> <span class="o">/</span> <span class="n">con</span><span class="o">.</span><span class="n">ACCELERATION</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># When not accelerating calculate distance based on current speed</span>
                    <span class="n">delay_in_s</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="nb">float</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">DISTANCE_BETWEEN_IMAGES</span><span class="p">)</span> <span class="o">/</span> <span class="n">current_total_vel</span>
                    <span class="p">)</span>
            <span class="n">delay_in_s</span> <span class="o">=</span> <span class="n">delay_in_s</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Next image in </span><span class="si">{</span><span class="n">delay_in_s</span><span class="si">}</span><span class="s2">s.&quot;</span><span class="p">)</span>
            <span class="n">image_task</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">delay_in_s</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">)</span><span class="o">.</span><span class="n">get_task</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">image_task</span><span class="p">)</span>

    <span class="c1"># run once after changing into acquisition mode -&gt; setup</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">control_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes acquisition mode by updating objectives and setting camera parameters.</span>

<span class="sd">        Retrieves objectives from an external API, determines the current objective, and adjusts</span>
<span class="sd">        acquisition parameters accordingly. Also creates necessary directories for image storage.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
            <span class="c1"># update Objectives</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">OBJECTIVE_ENDPOINT</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="n">json_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ZonedObjective</span><span class="p">]</span> <span class="o">=</span> <span class="n">ZonedObjective</span><span class="o">.</span><span class="n">parse_api</span><span class="p">(</span>
                        <span class="n">json_response</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Updated objectives, there are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> objectives.&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Could not get OBJECTIVE_ENDPOINT&quot;</span><span class="p">)</span>

        <span class="n">current_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Always check for new objective in this task</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Next_objective</span><span class="p">:</span>
            <span class="n">current_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using next_objective, current task: </span><span class="si">{</span><span class="n">current_obj</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># In this task look for the given string</span>
        <span class="k">elif</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Fixed_objective</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">settings</span><span class="o">.</span><span class="n">FIXED_OBJECTIVE</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using fixed_objective, current task: </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">current_obj</span> <span class="o">=</span> <span class="n">obj</span>
                    <span class="k">break</span>

        <span class="k">if</span> <span class="n">current_obj</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">START_TIME</span> <span class="o">=</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">start</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">STOP_TIME</span> <span class="o">=</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">end</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span> <span class="o">=</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">optic_required</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_current_obj_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
            <span class="p">)</span>

            <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH_BASE</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_obj_name</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span>

            <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_LOCATION</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span>
                <span class="o">+</span> <span class="s2">&quot;image_</span><span class="si">{melv_id}</span><span class="s2">_</span><span class="si">{angle}</span><span class="s2">_</span><span class="si">{time}</span><span class="s2">_x_</span><span class="si">{cor_x}</span><span class="s2">_y_</span><span class="si">{cor_y}</span><span class="s2">.png&quot;</span>
            <span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">&quot;mkdir&quot;</span><span class="p">,</span> <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="p">],</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created folder: </span><span class="si">{</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;z_obj could not mkdir: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># check if change occured and cut the last image</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_camera_angle_change</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">)</span>

        <span class="c1"># TODO stop velocity change if battery is low</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Battery low, cant accelerate any more!&quot;</span><span class="p">)</span>

        <span class="k">match</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Wide</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_velocity_change</span><span class="p">(</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_WIDE_X</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_WIDE_Y</span>
                <span class="p">)</span>
            <span class="k">case</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Narrow</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_velocity_change</span><span class="p">(</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NARROW_X</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NARROW_Y</span>
                <span class="p">)</span>
            <span class="k">case</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Normal</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_velocity_change</span><span class="p">(</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NORMAL_X</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NORMAL_Y</span>
                <span class="p">)</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.current_telemetry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_telemetry</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.current_telemetry" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.melv_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">melv_id</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9999</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.melv_id" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.previous_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">previous_state</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.previous_state" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.previous_telemetry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">previous_telemetry</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.previous_telemetry" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.recent_events" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">recent_events</span> <span class="o">=</span> <span class="p">[]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.recent_events" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.state_change_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">state_change_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.state_change_time" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.submitted_transition_request" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">submitted_transition_request</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.submitted_transition_request" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="melvonaut.state_planer.StatePlanner.target_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">target_state</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.target_state" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.calc_current_location" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calc_current_location</span><span class="p">()</span></code>

<a href="#melvonaut.state_planer.StatePlanner.calc_current_location" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Estimates the current location based on telemetry data and time elapsed.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="tuple">tuple</span>[<span title="float">float</span>, <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>tuple[float, float]: The estimated (x, y) coordinates.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_current_location</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Estimates the current location based on telemetry data and time elapsed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple[float, float]: The estimated (x, y) coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
    <span class="n">time_since_observation</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">live_utc</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
    <span class="n">current_x</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">width_x</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span> <span class="o">*</span> <span class="n">time_since_observation</span>
    <span class="p">)</span>
    <span class="n">current_y</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">height_y</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span> <span class="o">*</span> <span class="n">time_since_observation</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">current_x</span><span class="p">,</span> <span class="n">current_y</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.calc_transition_remaining_time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">calc_transition_remaining_time</span><span class="p">()</span></code>

<a href="#melvonaut.state_planer.StatePlanner.calc_transition_remaining_time" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculates the remaining time for state transition.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="datetime.timedelta">timedelta</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>datetime.timedelta: The remaining transition time based on the simulation speed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_transition_remaining_time</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the remaining time for state transition.</span>

<span class="sd">    Returns:</span>
<span class="sd">        datetime.timedelta: The remaining transition time based on the simulation speed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="ow">is</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Not in transition state, returning 0&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">:</span>
        <span class="n">total_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
            <span class="n">seconds</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">STATE_TRANSITION_FROM_SAFE_TIME</span>
            <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">total_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_since_state_change</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">total_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span>
            <span class="n">seconds</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">STATE_TRANSITION_TIME</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">total_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_time_since_state_change</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.control_acquisition" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">control_acquisition</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.control_acquisition" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initializes acquisition mode by updating objectives and setting camera parameters.</p>
<p>Retrieves objectives from an external API, determines the current objective, and adjusts
acquisition parameters accordingly. Also creates necessary directories for image storage.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">control_acquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes acquisition mode by updating objectives and setting camera parameters.</span>

<span class="sd">    Retrieves objectives from an external API, determines the current objective, and adjusts</span>
<span class="sd">    acquisition parameters accordingly. Also creates necessary directories for image storage.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="c1"># update Objectives</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">OBJECTIVE_ENDPOINT</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">json_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ZonedObjective</span><span class="p">]</span> <span class="o">=</span> <span class="n">ZonedObjective</span><span class="o">.</span><span class="n">parse_api</span><span class="p">(</span>
                    <span class="n">json_response</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Updated objectives, there are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> objectives.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Could not get OBJECTIVE_ENDPOINT&quot;</span><span class="p">)</span>

    <span class="n">current_obj</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Always check for new objective in this task</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Next_objective</span><span class="p">:</span>
        <span class="n">current_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using next_objective, current task: </span><span class="si">{</span><span class="n">current_obj</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># In this task look for the given string</span>
    <span class="k">elif</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Fixed_objective</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">settings</span><span class="o">.</span><span class="n">FIXED_OBJECTIVE</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using fixed_objective, current task: </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">current_obj</span> <span class="o">=</span> <span class="n">obj</span>
                <span class="k">break</span>

    <span class="k">if</span> <span class="n">current_obj</span><span class="p">:</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">START_TIME</span> <span class="o">=</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">start</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">STOP_TIME</span> <span class="o">=</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">end</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span> <span class="o">=</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">optic_required</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_current_obj_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_obj</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> <span class="n">current_obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH_BASE</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_obj_name</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span>

        <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_LOCATION</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span>
            <span class="o">+</span> <span class="s2">&quot;image_</span><span class="si">{melv_id}</span><span class="s2">_</span><span class="si">{angle}</span><span class="s2">_</span><span class="si">{time}</span><span class="s2">_x_</span><span class="si">{cor_x}</span><span class="s2">_y_</span><span class="si">{cor_y}</span><span class="s2">.png&quot;</span>
        <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">&quot;mkdir&quot;</span><span class="p">,</span> <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="p">],</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created folder: </span><span class="si">{</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_PATH</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;z_obj could not mkdir: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># check if change occured and cut the last image</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_camera_angle_change</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">)</span>

    <span class="c1"># TODO stop velocity change if battery is low</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Battery low, cant accelerate any more!&quot;</span><span class="p">)</span>

    <span class="k">match</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Wide</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_velocity_change</span><span class="p">(</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_WIDE_X</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_WIDE_Y</span>
            <span class="p">)</span>
        <span class="k">case</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Narrow</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_velocity_change</span><span class="p">(</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NARROW_X</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NARROW_Y</span>
            <span class="p">)</span>
        <span class="k">case</span> <span class="n">CameraAngle</span><span class="o">.</span><span class="n">Normal</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_velocity_change</span><span class="p">(</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NORMAL_X</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_SPEED_NORMAL_Y</span>
            <span class="p">)</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.get_current_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_current_state</span><span class="p">()</span></code>

<a href="#melvonaut.state_planer.StatePlanner.get_current_state" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves the current state from telemetry data.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>State</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="State (shared.models.State)" href="../shared/#shared.models.State">State</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current state if telemetry is available, otherwise State.Unknown.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_current_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves the current state from telemetry data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        State: The current state if telemetry is available, otherwise State.Unknown.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.get_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_image</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.get_image" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Captures an image if telemetry data is available and conditions are met.</p>
<p>If no telemetry data is available, the function waits for the next observation cycle.
It checks various conditions (e.g., acceleration, camera angle, timing) before fetching an image
from an external API and saving it with appropriate metadata.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Captures an image if telemetry data is available and conditions are met.</span>

<span class="sd">    If no telemetry data is available, the function waits for the next observation cycle.</span>
<span class="sd">    It checks various conditions (e.g., acceleration, camera angle, timing) before fetching an image</span>
<span class="sd">    from an external API and saving it with appropriate metadata.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting image&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No telemetry data available. Waiting </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span><span class="si">}</span><span class="s2">s for next image.&quot;</span>
        <span class="p">)</span>
        <span class="n">image_task</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_image</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_task</span><span class="p">()</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">image_task</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aiohttp_session</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aiohttp_session</span> <span class="o">=</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span>

    <span class="c1"># Filter out cases where no image should be taken</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Fixed_objective</span>
        <span class="ow">or</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">Next_objective</span>
    <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_z_obj_list</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Skipped image: In Objectives_only mode, but z_obj_list emtpy!&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span> <span class="o">!=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Skipped image: current_angle=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2"> vs target=</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Skipped image: accelerating to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DO_TIMING_CHECK</span> <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">START_TIME</span> <span class="o">&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
        <span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
    <span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Skipped image, to early: start=</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">START_TIME</span><span class="si">}</span><span class="s2"> current_time=</span><span class="si">{</span><span class="n">live_utc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DO_TIMING_CHECK</span> <span class="ow">and</span> <span class="n">live_utc</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">settings</span><span class="o">.</span><span class="n">STOP_TIME</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Skipped image, to late: end=</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">STOP_TIME</span><span class="si">}</span><span class="s2"> current_time=</span><span class="si">{</span><span class="n">live_utc</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># save the current telemetry values, so they dont get overwritten by a later update</span>
    <span class="n">tele_timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">tele_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">width_x</span>
    <span class="n">tele_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">height_y</span>
    <span class="n">tele_vx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
    <span class="n">tele_vy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
    <span class="n">tele_simSpeed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
    <span class="n">tele_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span>

    <span class="n">lens_size</span> <span class="o">=</span> <span class="n">lens_size_by_angle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    # TODO add box check if melvin and objective overlap</span>
<span class="sd">    # check if we are in range of an objective</span>
<span class="sd">    # TODO also check MELVINTasks</span>
<span class="sd">    # TODO check if within box, unless hidden</span>
<span class="sd">    melvin_box = (</span>
<span class="sd">        tele_x - lens_size / 2,</span>
<span class="sd">        tele_y - lens_size / 2,</span>
<span class="sd">        tele_x + lens_size / 2,</span>
<span class="sd">        tele_y + lens_size / 2,</span>
<span class="sd">    )</span>
<span class="sd">    if self._z_obj_list[0].zone is None:</span>
<span class="sd">        logger.warning(&quot;Hidden objective, taking photo&quot;)</span>
<span class="sd">        return</span>
<span class="sd">        TODO</span>
<span class="sd">    else:</span>
<span class="sd">        logger.warning(&quot;Checking if in range of objective:&quot;)</span>
<span class="sd">        objective_box = self._z_obj_list[0].zone</span>

<span class="sd">    if not boxes_overlap_in_grid(melvin_box, objective_box):</span>
<span class="sd">        logger.error(</span>
<span class="sd">            f&quot;Image skipped, not Overlapping! {melvin_box} {objective_box}&quot;</span>
<span class="sd">        )</span>
<span class="sd">        return</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">IMAGE_ENDPOINT</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="c1"># Extract exact image timestamp</span>
                    <span class="n">img_timestamp</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;image-timestamp&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">img_timestamp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="s2">&quot;Image timestamp not found in headers, substituting with current time&quot;</span>
                        <span class="p">)</span>
                        <span class="n">parsed_img_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">parsed_img_timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span>
                            <span class="n">img_timestamp</span>
                        <span class="p">)</span>

                    <span class="c1"># Calculate the difference between the img and the last telemetry</span>
                    <span class="n">difference_in_seconds</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">parsed_img_timestamp</span> <span class="o">-</span> <span class="n">tele_timestamp</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

                    <span class="n">adj_x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span>
                        <span class="n">tele_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">difference_in_seconds</span> <span class="o">*</span> <span class="n">tele_vx</span> <span class="o">*</span> <span class="n">tele_simSpeed</span><span class="p">)</span>
                    <span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">lens_size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="n">adj_y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span>
                        <span class="n">tele_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">difference_in_seconds</span> <span class="o">*</span> <span class="n">tele_vy</span> <span class="o">*</span> <span class="n">tele_simSpeed</span><span class="p">)</span>
                    <span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">lens_size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

                    <span class="c1"># TODO check if images are correct!</span>
                    <span class="c1"># TODO might also need modulo for side cases</span>
                    <span class="c1"># logger.debug(f&quot;T {parsed_img_timestamp} | C {tele_timestamp}&quot;)</span>
                    <span class="c1"># logger.debug(</span>
                    <span class="c1">#     f&quot;D {difference_in_seconds} | R {tele_x} ADJ {adj_x}&quot;</span>
                    <span class="c1"># )</span>

                    <span class="n">image_path</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">IMAGE_LOCATION</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">melv_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_obj_name</span><span class="p">,</span>
                        <span class="n">angle</span><span class="o">=</span><span class="n">tele_angle</span><span class="p">,</span>
                        <span class="n">time</span><span class="o">=</span><span class="n">parsed_img_timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">),</span>
                        <span class="n">cor_x</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">adj_x</span><span class="p">),</span>
                        <span class="n">cor_y</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">adj_y</span><span class="p">),</span>
                    <span class="p">)</span>

                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Received image at </span><span class="si">{</span><span class="n">adj_x</span><span class="si">}</span><span class="s2">x </span><span class="si">{</span><span class="n">adj_y</span><span class="si">}</span><span class="s2">y with </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2"> angle&quot;</span>
                    <span class="p">)</span>

                    <span class="k">async</span> <span class="k">with</span> <span class="n">async_open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">afp</span><span class="p">:</span>
                        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                            <span class="n">cnt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">readany</span><span class="p">()</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">cnt</span><span class="p">:</span>
                                <span class="k">break</span>
                            <span class="k">await</span> <span class="n">afp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cnt</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get image: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response body: </span><span class="si">{</span><span class="k">await</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s2">&quot;This is normal at the end of acquisition mode once.&quot;</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">client_exceptions</span><span class="o">.</span><span class="n">ConnectionTimeoutError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Observations endpoint timeouted.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Get image task was cancelled.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.get_previous_state" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_previous_state</span><span class="p">()</span></code>

<a href="#melvonaut.state_planer.StatePlanner.get_previous_state" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Retrieves the previous state from telemetry data.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>State</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="State (shared.models.State)" href="../shared/#shared.models.State">State</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The previous state if telemetry is available, otherwise State.Unknown.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_previous_state</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves the previous state from telemetry data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        State: The previous state if telemetry is available, otherwise State.Unknown.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span><span class="o">.</span><span class="n">state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.get_simulation_speed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_simulation_speed</span><span class="p">()</span></code>

<a href="#melvonaut.state_planer.StatePlanner.get_simulation_speed" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Gets the current simulation speed from telemetry data.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The simulation speed if telemetry is available, otherwise 1.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_simulation_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the current simulation speed from telemetry data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The simulation speed if telemetry is available, otherwise 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">simulation_speed</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.get_time_since_state_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_time_since_state_change</span><span class="p">()</span></code>

<a href="#melvonaut.state_planer.StatePlanner.get_time_since_state_change" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Calculates the time elapsed since the last state change.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="datetime.timedelta">timedelta</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>datetime.timedelta: The time difference between now and the last state change.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_time_since_state_change</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculates the time elapsed since the last state change.</span>

<span class="sd">    Returns:</span>
<span class="sd">        datetime.timedelta: The time difference between now and the last state change.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_change_time</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.model_post_init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_post_init</span><span class="p">(</span><span class="n">__context__</span><span class="p">)</span></code>

<a href="#melvonaut.state_planer.StatePlanner.model_post_init" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initializes the recent_events list by loading events from a CSV file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>__context__</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Context data passed during initialization.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">model_post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">__context__</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initializes the recent_events list by loading events from a CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        __context__ (Any): Context data passed during initialization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recent_events</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">load_events_from_csv</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">EVENT_LOCATION_CSV</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.plan_state_switching" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plan_state_switching</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.plan_state_switching" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Plans and executes state transitions based on current telemetry data.</p>
<p>This function checks the current state and decides whether to transition
to another state based on conditions like battery level and velocity.</p>
<p>Logs relevant debug information and triggers state transitions when necessary.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">plan_state_switching</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plans and executes state transitions based on current telemetry data.</span>

<span class="sd">    This function checks the current state and decides whether to transition</span>
<span class="sd">    to another state based on conditions like battery level and velocity.</span>

<span class="sd">    Logs relevant debug information and triggers state transitions when necessary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot plan state switching.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span>

    <span class="k">match</span> <span class="n">state</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Time since state change: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_time_since_state_change</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">expected_time_to_complete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_transition_remaining_time</span><span class="p">()</span>
            <span class="n">limited_log</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;State is Transition to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_state</span><span class="si">}</span><span class="s2">, waiting for transition to complete.</span><span class="se">\n</span><span class="s2">Expected time to complete state transition: </span><span class="si">{</span><span class="n">expected_time_to_complete</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="c1"># logger.debug(</span>
            <span class="c1">#     f&quot;Previous state: {self.get_previous_state()}, Current state: {self.get_current_state()}&quot;</span>
            <span class="c1"># )</span>
        <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
            <span class="c1"># in EBT leave once everything is set</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">EBT</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span>
                    <span class="o">==</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
                <span class="p">):</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">)</span>

            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>

        <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span>
                <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">max_battery</span>
                <span class="o">-</span> <span class="n">settings</span><span class="o">.</span><span class="n">BATTERY_HIGH_THRESHOLD</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENT_MELVIN_TASK</span> <span class="o">==</span> <span class="n">MELVINTask</span><span class="o">.</span><span class="n">EBT</span><span class="p">:</span>
                    <span class="c1"># starting ebt, but speed/angle not set yet</span>

                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;EBT Task, Angle: telemetry: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="si">}</span><span class="s2"> vs target: </span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;EBT Task, vx: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="si">}</span><span class="s2"> vs target: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;EBT Task, vy: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="si">}</span><span class="s2"> vs target: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="ow">is</span> <span class="kc">None</span>
                        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="ow">is</span> <span class="kc">None</span>
                        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span>
                        <span class="o">!=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TARGET_CAMERA_ANGLE_ACQUISITION</span>
                        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
                        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
                    <span class="p">):</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># logger.info(&quot;starting comms!&quot;)</span>
                        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">)</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># logger.info(&quot;starting acq!&quot;)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>

        <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span> <span class="o">&gt;=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">max_battery</span> <span class="o">*</span> <span class="mf">0.5</span>
            <span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Deployment</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;State is Deployment, triggering transition to Acquisition&quot;</span>
            <span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.run_get_image" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_get_image</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.run_get_image" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Continuously captures images while in the Acquisition state.</p>
<p>This function continuously captures images at calculated intervals,
adjusting timing based on velocity and acceleration.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">run_get_image</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Continuously captures images while in the Acquisition state.</span>

<span class="sd">    This function continuously captures images at calculated intervals,</span>
<span class="sd">    adjusting timing based on velocity and acceleration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Starting run_get_image&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;No telemetry data available. Assuming Observation Refresh Rate.&quot;</span>
            <span class="p">)</span>
            <span class="n">delay_in_s</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">OBSERVATION_REFRESH_RATE</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">current_total_vel</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span><span class="p">:</span>
                <span class="c1"># If accelerating calculate distance based on current speed and acceleration</span>
                <span class="n">delay_in_s</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
                        <span class="n">current_total_vel</span><span class="o">**</span><span class="mi">2</span>
                        <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">con</span><span class="o">.</span><span class="n">ACCELERATION</span> <span class="o">*</span> <span class="n">settings</span><span class="o">.</span><span class="n">DISTANCE_BETWEEN_IMAGES</span>
                    <span class="p">)</span>
                    <span class="o">-</span> <span class="n">current_total_vel</span>
                <span class="p">)</span> <span class="o">/</span> <span class="n">con</span><span class="o">.</span><span class="n">ACCELERATION</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># When not accelerating calculate distance based on current speed</span>
                <span class="n">delay_in_s</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="nb">float</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">DISTANCE_BETWEEN_IMAGES</span><span class="p">)</span> <span class="o">/</span> <span class="n">current_total_vel</span>
                <span class="p">)</span>
        <span class="n">delay_in_s</span> <span class="o">=</span> <span class="n">delay_in_s</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulation_speed</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Next image in </span><span class="si">{</span><span class="n">delay_in_s</span><span class="si">}</span><span class="s2">s.&quot;</span><span class="p">)</span>
        <span class="n">image_task</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">delay_in_s</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_image</span><span class="p">)</span><span class="o">.</span><span class="n">get_task</span><span class="p">()</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">image_task</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.switch_if_battery_low" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">switch_if_battery_low</span><span class="p">(</span><span class="n">state_low_battery</span><span class="p">,</span> <span class="n">state_high_battery</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.switch_if_battery_low" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Switches state based on battery level.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>state_low_battery</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="State (shared.models.State)" href="../shared/#shared.models.State">State</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state to switch to when battery is low.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>state_high_battery</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="State (shared.models.State)" href="../shared/#shared.models.State">State</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The state to switch to when battery is sufficient.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">switch_if_battery_low</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">state_low_battery</span><span class="p">:</span> <span class="n">State</span><span class="p">,</span> <span class="n">state_high_battery</span><span class="p">:</span> <span class="n">State</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Switches state based on battery level.</span>

<span class="sd">    Args:</span>
<span class="sd">        state_low_battery (State): The state to switch to when battery is low.</span>
<span class="sd">        state_high_battery (State): The state to switch to when battery is sufficient.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;No telemetry data available. Cannot plan battery based switching.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span> <span class="o">&lt;=</span> <span class="n">settings</span><span class="o">.</span><span class="n">BATTERY_LOW_THRESHOLD</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">state_low_battery</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;State is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">, Battery is low, triggering transition to </span><span class="si">{</span><span class="n">state_low_battery</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">state_low_battery</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">==</span> <span class="n">state_high_battery</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;State is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">, Battery is high, triggering transition to </span><span class="si">{</span><span class="n">state_high_battery</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">state_high_battery</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.trigger_camera_angle_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trigger_camera_angle_change</span><span class="p">(</span><span class="n">new_angle</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.trigger_camera_angle_change" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Tries to change the camera angle to new_angle</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_angle</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="CameraAngle (shared.models.CameraAngle)" href="../shared/#shared.models.CameraAngle">CameraAngle</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The desired camera angle.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_camera_angle_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_angle</span><span class="p">:</span> <span class="n">CameraAngle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tries to change the camera angle to new_angle</span>

<span class="sd">    Args:</span>
<span class="sd">        new_angle (CameraAngle): The desired camera angle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot set camera angle.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">new_angle</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Target camera angle already set. Not changing angle.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;vel_x&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="p">,</span>
        <span class="s2">&quot;vel_y&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="p">,</span>
        <span class="s2">&quot;camera_angle&quot;</span><span class="p">:</span> <span class="n">new_angle</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">(),</span>
    <span class="p">}</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">CONTROL_ENDPOINT</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">request_body</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="n">new_angle</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Camera angle set to </span><span class="si">{</span><span class="n">new_angle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to set camera angle to </span><span class="si">{</span><span class="n">new_angle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.trigger_state_transition" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trigger_state_transition</span><span class="p">(</span><span class="n">new_state</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.trigger_state_transition" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Initiates a state transition if valid conditions are met.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_state</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="State (shared.models.State)" href="../shared/#shared.models.State">State</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The target state to transition to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_state_transition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initiates a state transition if valid conditions are met.</span>

<span class="sd">    Args:</span>
<span class="sd">        new_state (State): The target state to transition to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">new_state</span> <span class="ow">in</span> <span class="p">[</span><span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Unknown</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Deployment</span><span class="p">,</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">]:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot transition to </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot initiate transition.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Already in transition state, not starting transition.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">new_state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;State is already </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2">, not starting transition.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="n">new_state</span><span class="p">,</span>
        <span class="s2">&quot;vel_x&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="p">,</span>
        <span class="s2">&quot;vel_y&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="p">,</span>
        <span class="s2">&quot;camera_angle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">CONTROL_ENDPOINT</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">request_body</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Started transition to </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2"> at battery level </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">submitted_transition_request</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">target_state</span> <span class="o">=</span> <span class="n">new_state</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to transition to </span><span class="si">{</span><span class="n">new_state</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response body: </span><span class="si">{</span><span class="k">await</span><span class="w"> </span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.trigger_velocity_change" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">trigger_velocity_change</span><span class="p">(</span><span class="n">new_vel_x</span><span class="p">,</span> <span class="n">new_vel_y</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.trigger_velocity_change" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sets new values for accelartion, also set _accelerating</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_vel_x</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The target velocity in the x direction.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>new_vel_y</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The target velocity in the y direction.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">trigger_velocity_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_vel_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">new_vel_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets new values for accelartion, also set _accelerating</span>

<span class="sd">    Args:</span>
<span class="sd">        new_vel_x (float): The target velocity in the x direction.</span>
<span class="sd">        new_vel_y (float): The target velocity in the y direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">=</span> <span class="n">new_vel_x</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">=</span> <span class="n">new_vel_y</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No telemetry data available. Cannot set velocity.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">new_vel_x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
        <span class="ow">and</span> <span class="n">new_vel_y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Target velocity already set. Not changing velocity.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">request_body</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;vel_x&quot;</span><span class="p">:</span> <span class="n">new_vel_x</span><span class="p">,</span>
        <span class="s2">&quot;vel_y&quot;</span><span class="p">:</span> <span class="n">new_vel_y</span><span class="p">,</span>
        <span class="s2">&quot;camera_angle&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">angle</span><span class="p">,</span>
        <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">(),</span>
    <span class="p">}</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">CONTROL_ENDPOINT</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">request_body</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Velocity set to </span><span class="si">{</span><span class="n">new_vel_x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">new_vel_y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to set velocity to </span><span class="si">{</span><span class="n">new_vel_x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">new_vel_y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="melvonaut.state_planer.StatePlanner.update_telemetry" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_telemetry</span><span class="p">(</span><span class="n">new_telemetry</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#melvonaut.state_planer.StatePlanner.update_telemetry" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Updates the telemetry data and handles state changes.</p>
<p>This function updates the previous and current telemetry readings,
logs relevant debug information, and checks for state changes.</p>
<p>If a state change occurs, it logs the transition, cancels image
retrieval tasks if necessary, and triggers appropriate actions based on
the new state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_telemetry</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="MelTelemetry (melvonaut.mel_telemetry.MelTelemetry)" href="#melvonaut.mel_telemetry.MelTelemetry">MelTelemetry</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new telemetry data to update.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/state_planer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update_telemetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_telemetry</span><span class="p">:</span> <span class="n">MelTelemetry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the telemetry data and handles state changes.</span>

<span class="sd">    This function updates the previous and current telemetry readings,</span>
<span class="sd">    logs relevant debug information, and checks for state changes.</span>

<span class="sd">    If a state change occurs, it logs the transition, cancels image</span>
<span class="sd">    retrieval tasks if necessary, and triggers appropriate actions based on</span>
<span class="sd">    the new state.</span>

<span class="sd">    Args:</span>
<span class="sd">        new_telemetry (MelTelemetry): The new telemetry data to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span> <span class="o">=</span> <span class="n">new_telemetry</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;New observations - State: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">,&quot;</span>
        <span class="sa">f</span><span class="s2">&quot; Battery level: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">battery</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">max_battery</span><span class="si">}</span><span class="s2">,&quot;</span>
        <span class="sa">f</span><span class="s2">&quot; Vel X,Y: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span><span class="si">}</span><span class="s2">,&quot;</span>
        <span class="sa">f</span><span class="s2">&quot; Fuel: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">fuel</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Current memory usage: &quot;</span>
        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">())</span><span class="o">.</span><span class="n">memory_info</span><span class="p">()</span><span class="o">.</span><span class="n">rss</span> <span class="o">/</span> <span class="mi">1024</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot; MB&quot;</span>
    <span class="p">)</span>

    <span class="c1"># if self.get_current_state() == State.Acquisition:</span>
    <span class="c1">#    await self.get_image()</span>
    <span class="c1"># logger.debug(f&quot;Threads: {threading.active_count()}&quot;)</span>
    <span class="c1"># for thread in threading.enumerate():</span>
    <span class="c1">#    frame = sys._current_frames()[thread.ident]</span>
    <span class="c1">#    logger.warning(f&quot;{inspect.getframeinfo(frame).filename}.{inspect.getframeinfo(frame).function}:{inspect.getframeinfo(frame).lineno}&quot;)</span>

    <span class="c1"># check if still accelerating</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vx</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_vel_y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_telemetry</span><span class="o">.</span><span class="n">vy</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_telemetry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_previous_state</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;State changed from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_previous_state</span><span class="p">()</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">previous_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_previous_state</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_change_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="c1"># Put in here events to do on state change</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">TRACING</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                    <span class="n">snapshot1</span> <span class="o">=</span> <span class="n">tracemalloc</span><span class="o">.</span><span class="n">take_snapshot</span><span class="p">()</span>
                    <span class="n">stats</span> <span class="o">=</span> <span class="n">snapshot1</span><span class="o">.</span><span class="n">statistics</span><span class="p">(</span><span class="s2">&quot;traceback&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">stat</span> <span class="ow">in</span> <span class="n">stats</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> memory blocks: </span><span class="si">%.1f</span><span class="s2"> KiB&quot;</span>
                            <span class="o">%</span> <span class="p">(</span><span class="n">stat</span><span class="o">.</span><span class="n">count</span><span class="p">,</span> <span class="n">stat</span><span class="o">.</span><span class="n">size</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">stat</span><span class="o">.</span><span class="n">traceback</span><span class="o">.</span><span class="n">format</span><span class="p">():</span>
                            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

            <span class="c1"># logger.debug(</span>
            <span class="c1">#     f&quot;Previous state: {self.previous_state}, Current state: {self.get_current_state()}&quot;</span>
            <span class="c1"># )</span>
            <span class="k">match</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
                <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;end image&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">submitted_transition_request</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">submitted_transition_request</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;State transition was externally triggered!&quot;</span><span class="p">)</span>
                <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting control in acquisition state.&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Image task already running&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;start image&quot;</span><span class="p">)</span>
                        <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_run_get_image_task</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">run_get_image</span><span class="p">()</span>
                        <span class="p">)</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">control_acquisition</span><span class="p">()</span>
                <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Charge</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Safe</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;State transitioned to SAFE!&quot;</span><span class="p">)</span>
                <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Communication</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">case</span> <span class="n">State</span><span class="o">.</span><span class="n">Deployment</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;State transitioned to DEPLOYMENT!&quot;</span><span class="p">)</span>
                <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown state </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">!=</span> <span class="n">State</span><span class="o">.</span><span class="n">Acquisition</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_accelerating</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span> <span class="o">!=</span> <span class="n">State</span><span class="o">.</span><span class="n">Transition</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_state</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">():</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Planned state transition to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_state</span><span class="si">}</span><span class="s2"> failed, now in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_current_state</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Planned state transition to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target_state</span><span class="si">}</span><span class="s2"> succeeded.&quot;</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">target_state</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">plan_state_switching</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="melvonaut.utils" class="doc doc-heading">
            <code>utils</code>


<a href="#melvonaut.utils" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="melvonaut.utils.file_log_handler_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">file_log_handler_id</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

<a href="#melvonaut.utils.file_log_handler_id" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="melvonaut.utils.melvin_notifier" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">melvin_notifier</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">notify_type</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#melvonaut.utils.melvin_notifier" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Melvin-specific notification handler.</p>
<p>Just prints to stdout.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>body</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The message body.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The notification title.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>notify_type</code>
            </td>
            <td>
                  <code><span title="apprise.NotifyType">NotifyType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of notification.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional keyword arguments.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@apprise</span><span class="o">.</span><span class="n">decorators</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">on</span><span class="o">=</span><span class="s2">&quot;melvin&quot;</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<span class="k">def</span> <span class="nf">melvin_notifier</span><span class="p">(</span>
    <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">notify_type</span><span class="p">:</span> <span class="n">NotifyType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Melvin-specific notification handler.</span>

<span class="sd">    Just prints to stdout.</span>

<span class="sd">    Args:</span>
<span class="sd">        body (str): The message body.</span>
<span class="sd">        title (str): The notification title.</span>
<span class="sd">        notify_type (NotifyType): The type of notification.</span>
<span class="sd">        *args (Any): Additional arguments.</span>
<span class="sd">        **kwargs (dict[str, Any]): Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MELVIN HERE!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.utils.setup_file_logging" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_file_logging</span><span class="p">()</span></code>

<a href="#melvonaut.utils.setup_file_logging" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Configures file-based logging with rotation at midnight.</p>
<p>If a file log handler already exists, it is removed before adding a new one.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_file_logging</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configures file-based logging with rotation at midnight.</span>

<span class="sd">    If a file log handler already exists, it is removed before adding a new one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">file_log_handler_id</span>
    <span class="k">if</span> <span class="n">file_log_handler_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file_log_handler_id</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
    <span class="n">file_log_handler_id</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">sink</span><span class="o">=</span><span class="n">con</span><span class="o">.</span><span class="n">MEL_LOG_LOCATION</span><span class="p">,</span>
        <span class="n">rotation</span><span class="o">=</span><span class="s2">&quot;00:00&quot;</span><span class="p">,</span>
        <span class="n">level</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">FILE_LOGGING_LEVEL</span><span class="p">,</span>
        <span class="n">backtrace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">diagnose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enqueue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="melvonaut.utils.setup_logging" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_logging</span><span class="p">()</span></code>

<a href="#melvonaut.utils.setup_logging" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Configures the logging system for the application.</p>
<p>This function removes existing log handlers, sets up terminal logging,
and configures Apprise notifications for Discord and Melvin events.</p>


            <details class="quote">
              <summary>Source code in <code>src/melvonaut/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_logging</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configures the logging system for the application.</span>

<span class="sd">    This function removes existing log handlers, sets up terminal logging,</span>
<span class="sd">    and configures Apprise notifications for Discord and Melvin events.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="n">sink</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
        <span class="n">level</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">TERMINAL_LOGGING_LEVEL</span><span class="p">,</span>
        <span class="n">backtrace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">diagnose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">enqueue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">notifier</span> <span class="o">=</span> <span class="n">apprise</span><span class="o">.</span><span class="n">Apprise</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DISCORD_WEBHOOK_TOKEN</span> <span class="ow">and</span> <span class="n">settings</span><span class="o">.</span><span class="n">DISCORD_ALERTS_ENABLED</span><span class="p">:</span>
        <span class="n">notifier</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;discord://</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">DISCORD_WEBHOOK_TOKEN</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">notifier</span><span class="o">.</span><span class="n">notify</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;apprise&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>  <span class="c1"># type: ignore</span>

    <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">NETWORK_SIM_ENABLED</span><span class="p">:</span>
        <span class="n">notifier</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;melvin://&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">notifier</span><span class="o">.</span><span class="n">notify</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;ERROR&quot;</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;apprise&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>  <span class="c1"># type: ignore</span>

    <span class="n">setup_file_logging</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>